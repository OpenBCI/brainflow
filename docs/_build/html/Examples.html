

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Code Samples &mdash; BrainFlow  documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://brainflow.readthedocs.io/en/latest/Examples.html"/>
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="BrainFlow to MNE Python Notebook" href="notebooks/brainflow_mne.html" />
    <link rel="prev" title="Data Format Description" href="DataFormatDesc.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> BrainFlow
          

          
            
            <img src="_static/brainflow_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="SupportedBoards.html">Supported Boards</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SupportedBoards.html#streaming-board">Streaming Board</a></li>
<li class="toctree-l2"><a class="reference internal" href="SupportedBoards.html#synthetic-board">Synthetic Board</a></li>
<li class="toctree-l2"><a class="reference internal" href="SupportedBoards.html#openbci">OpenBCI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SupportedBoards.html#cyton">Cyton</a></li>
<li class="toctree-l3"><a class="reference internal" href="SupportedBoards.html#ganglion">Ganglion</a></li>
<li class="toctree-l3"><a class="reference internal" href="SupportedBoards.html#cyton-daisy">Cyton Daisy</a></li>
<li class="toctree-l3"><a class="reference internal" href="SupportedBoards.html#ganglion-with-wifi-shield">Ganglion with Wifi Shield</a></li>
<li class="toctree-l3"><a class="reference internal" href="SupportedBoards.html#cyton-with-wifi-shield">Cyton with Wifi Shield</a></li>
<li class="toctree-l3"><a class="reference internal" href="SupportedBoards.html#cyton-daisy-with-wifi-shield">Cyton Daisy with Wifi Shield</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="BuildBrainFlow.html">Installation Instructions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="BuildBrainFlow.html#python">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="BuildBrainFlow.html#c">C#</a><ul>
<li class="toctree-l3"><a class="reference internal" href="BuildBrainFlow.html#unity-integration">Unity Integration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="BuildBrainFlow.html#r">R</a></li>
<li class="toctree-l2"><a class="reference internal" href="BuildBrainFlow.html#java">Java</a></li>
<li class="toctree-l2"><a class="reference internal" href="BuildBrainFlow.html#compilation-of-core-module-and-c-binding">Compilation of Core module and C++ binding</a><ul>
<li class="toctree-l3"><a class="reference internal" href="BuildBrainFlow.html#windows">Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="BuildBrainFlow.html#linux">Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="BuildBrainFlow.html#macos">MacOS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="CoreModuleAPI.html">BrainFlow Core API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="CoreModuleAPI.html#all-possible-exit-codes-and-supported-boards">All possible exit codes and supported boards</a></li>
<li class="toctree-l2"><a class="reference internal" href="CoreModuleAPI.html#boardcontroller-interface">BoardController Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="CoreModuleAPI.html#datahandler-interface">DataHandler Interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="UserAPI.html">User API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="UserAPI.html#python-api-reference">Python API Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="UserAPI.html#brainflow-board-shim">brainflow.board_shim</a></li>
<li class="toctree-l3"><a class="reference internal" href="UserAPI.html#brainflow-exit-codes">brainflow.exit_codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="UserAPI.html#brainflow-data-filter">brainflow.data_filter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="UserAPI.html#c-api-reference">C++ API Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="UserAPI.html#boardshim-class">BoardShim class</a></li>
<li class="toctree-l3"><a class="reference internal" href="UserAPI.html#datafilter-class">DataFilter class</a></li>
<li class="toctree-l3"><a class="reference internal" href="UserAPI.html#brainflowexception-class">BrainFlowException class</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="UserAPI.html#java-api-reference">Java API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="UserAPI.html#id1">C# API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="UserAPI.html#r-api-reference">R API Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="DataFormatDesc.html">Data Format Description</a><ul>
<li class="toctree-l2"><a class="reference internal" href="DataFormatDesc.html#generic-format-description">Generic Format Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="DataFormatDesc.html#special-channels-for-cyton-based-boards">Special channels for Cyton Based boards</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Code Samples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#python">Python</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#python-get-data-from-a-board">Python Get Data from a Board</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-read-write-file">Python Read Write File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-downsample-data">Python Downsample Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-transforms">Python Transforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-signal-filtering">Python Signal Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-denoising">Python Denoising</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-mne-integration">Python MNE Integration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#java">Java</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#java-get-data-from-a-board">Java Get Data from a Board</a></li>
<li class="toctree-l3"><a class="reference internal" href="#java-read-write-file">Java Read Write File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#java-downsample-data">Java Downsample Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#java-transforms">Java Transforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#java-signal-filtering">Java Signal Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#java-denoising">Java Denoising</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#c">C#</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#c-read-data-from-a-board">C# Read Data from a Board</a></li>
<li class="toctree-l3"><a class="reference internal" href="#c-read-write-file">C# Read Write File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#c-downsample-data">C# Downsample Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#c-transforms">C# Transforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#c-signal-filtering">C# Signal Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#c-denoising">C# Denoising</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id1">C++</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cmake-file-example">CMake File Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">C++ Read Data from a Board</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">C++ Read Write File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">C++ Downsample Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">C++ Transforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">C++ Signal Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">C++ Denoising</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#r">R</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#r-get-data-from-a-board">R Get Data from a Board</a></li>
<li class="toctree-l3"><a class="reference internal" href="#r-read-write-file">R Read Write File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#r-transforms">R Transforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#r-signal-filtering">R Signal Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#r-denoising">R Denoising</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#notebooks">Notebooks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="notebooks/brainflow_mne.html">BrainFlow to MNE Python Notebook</a></li>
<li class="toctree-l3"><a class="reference internal" href="notebooks/denoising.html">Denoising Notebook</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="BrainFlowDev.html">BrainFlow Dev</a><ul>
<li class="toctree-l2"><a class="reference internal" href="BrainFlowDev.html#code-style">Code style</a></li>
<li class="toctree-l2"><a class="reference internal" href="BrainFlowDev.html#ci-and-tests">CI and tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="BrainFlowDev.html#pull-requests">Pull Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="BrainFlowDev.html#instructions-to-add-new-boards-to-brainflow">Instructions to add new boards to BrainFlow</a></li>
<li class="toctree-l2"><a class="reference internal" href="BrainFlowDev.html#instructions-to-build-docs-locally">Instructions to build docs locally</a></li>
<li class="toctree-l2"><a class="reference internal" href="BrainFlowDev.html#debug-brainflow-s-errors">Debug BrainFlow’s errors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="BrainFlowEmulator.html">BrainFlow Emulator</a><ul>
<li class="toctree-l2"><a class="reference internal" href="BrainFlowEmulator.html#streaming-board">Streaming Board</a></li>
<li class="toctree-l2"><a class="reference internal" href="BrainFlowEmulator.html#openbci-cyton">OpenBCI Cyton</a></li>
<li class="toctree-l2"><a class="reference internal" href="BrainFlowEmulator.html#openbci-novaxr">OpenBCI NovaXR</a></li>
<li class="toctree-l2"><a class="reference internal" href="BrainFlowEmulator.html#openbci-wifi-shield-based-boards">OpenBCI Wifi Shield based boards</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="AskHelp.html">Ask Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="AskHelp.html#contact-info-feature-request-report-an-issue">Contact Info, Feature Request, Report an Issue</a></li>
<li class="toctree-l2"><a class="reference internal" href="AskHelp.html#issue-format">Issue format</a></li>
<li class="toctree-l2"><a class="reference internal" href="AskHelp.html#contributors">Contributors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="License.html">MIT License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BrainFlow</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Code Samples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="code-samples">
<span id="code-samples-label"></span><h1>Code Samples<a class="headerlink" href="#code-samples" title="Permalink to this headline">¶</a></h1>
<p>Make sure that you’ve installed BrainFlow package before running the code samples below.</p>
<p>See <a class="reference internal" href="BuildBrainFlow.html#installation-label"><span class="std std-ref">Installation Instructions</span></a> for details.</p>
<div class="section" id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<p><strong>To run some signal processing samples, you may need to install:</strong></p>
<ul class="simple">
<li><p>matplotlib</p></li>
<li><p>pandas</p></li>
<li><p>mne</p></li>
</ul>
<p>BrainFlow doesn’t need these packages and doesn’t install them, but we use them in demos below.</p>
<div class="section" id="python-get-data-from-a-board">
<h3>Python Get Data from a Board<a class="headerlink" href="#python-get-data-from-a-board" title="Permalink to this headline">¶</a></h3>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">brainflow</span>
<span class="kn">from</span> <span class="nn">brainflow.board_shim</span> <span class="kn">import</span> <span class="n">BoardShim</span><span class="p">,</span> <span class="n">BrainFlowInputParams</span>
<span class="kn">from</span> <span class="nn">brainflow.data_filter</span> <span class="kn">import</span> <span class="n">DataFilter</span><span class="p">,</span> <span class="n">FilterTypes</span><span class="p">,</span> <span class="n">AggOperations</span>


<span class="k">def</span> <span class="nf">main</span> <span class="p">():</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span> <span class="p">()</span>
    <span class="c1"># use docs to check which parameters are required for specific board, e.g. for Cyton - set serial port</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;--ip-port&#39;</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="nb">int</span><span class="p">,</span> <span class="n">help</span>  <span class="o">=</span> <span class="s1">&#39;ip port&#39;</span><span class="p">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;--ip-protocol&#39;</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="nb">int</span><span class="p">,</span> <span class="n">help</span>  <span class="o">=</span> <span class="s1">&#39;ip protocol, check IpProtocolType enum&#39;</span><span class="p">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;--ip-address&#39;</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="nb">str</span><span class="p">,</span> <span class="n">help</span>  <span class="o">=</span> <span class="s1">&#39;ip address&#39;</span><span class="p">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;--serial-port&#39;</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="nb">str</span><span class="p">,</span> <span class="n">help</span>  <span class="o">=</span> <span class="s1">&#39;serial port&#39;</span><span class="p">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;--mac-address&#39;</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="nb">str</span><span class="p">,</span> <span class="n">help</span>  <span class="o">=</span> <span class="s1">&#39;mac address&#39;</span><span class="p">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;--other-info&#39;</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="nb">str</span><span class="p">,</span> <span class="n">help</span>  <span class="o">=</span> <span class="s1">&#39;other info&#39;</span><span class="p">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;--streamer-params&#39;</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="nb">str</span><span class="p">,</span> <span class="n">help</span>  <span class="o">=</span> <span class="s1">&#39;other info&#39;</span><span class="p">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;--board-id&#39;</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="nb">int</span><span class="p">,</span> <span class="n">help</span>  <span class="o">=</span> <span class="s1">&#39;board id, check docs to get a list of supported boards&#39;</span><span class="p">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span> <span class="p">(</span><span class="s1">&#39;--log&#39;</span><span class="p">,</span> <span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span> <span class="p">()</span>

    <span class="n">params</span> <span class="o">=</span> <span class="n">BrainFlowInputParams</span> <span class="p">()</span>
    <span class="n">params</span><span class="o">.</span><span class="n">ip_port</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">ip_port</span>
    <span class="n">params</span><span class="o">.</span><span class="n">serial_port</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">serial_port</span>
    <span class="n">params</span><span class="o">.</span><span class="n">mac_address</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">mac_address</span>
    <span class="n">params</span><span class="o">.</span><span class="n">other_info</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">other_info</span>
    <span class="n">params</span><span class="o">.</span><span class="n">ip_address</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">ip_address</span>
    <span class="n">params</span><span class="o">.</span><span class="n">ip_protocol</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">ip_protocol</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">log</span><span class="p">):</span>
        <span class="n">BoardShim</span><span class="o">.</span><span class="n">enable_dev_board_logger</span> <span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">BoardShim</span><span class="o">.</span><span class="n">disable_board_logger</span> <span class="p">()</span>

    <span class="n">board</span> <span class="o">=</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">board_id</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="n">board</span><span class="o">.</span><span class="n">prepare_session</span> <span class="p">()</span>

    <span class="c1"># board.start_stream () # use this for default options</span>
    <span class="n">board</span><span class="o">.</span><span class="n">start_stream</span> <span class="p">(</span><span class="mi">45000</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">streamer_params</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span> <span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="c1"># data = board.get_current_board_data (256) # get latest 256 packages or less, doesnt remove them from internal buffer</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">get_board_data</span> <span class="p">()</span> <span class="c1"># get all data and remove it from internal buffer</span>
    <span class="n">board</span><span class="o">.</span><span class="n">stop_stream</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">release_session</span> <span class="p">()</span>

    <span class="nb">print</span> <span class="p">(</span><span class="n">data</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span> <span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="python-read-write-file">
<h3>Python Read Write File<a class="headerlink" href="#python-read-write-file" title="Permalink to this headline">¶</a></h3>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">import</span> <span class="nn">brainflow</span>
<span class="kn">from</span> <span class="nn">brainflow.board_shim</span> <span class="kn">import</span> <span class="n">BoardShim</span><span class="p">,</span> <span class="n">BrainFlowInputParams</span><span class="p">,</span> <span class="n">LogLevels</span><span class="p">,</span> <span class="n">BoardIds</span>
<span class="kn">from</span> <span class="nn">brainflow.data_filter</span> <span class="kn">import</span> <span class="n">DataFilter</span><span class="p">,</span> <span class="n">FilterTypes</span><span class="p">,</span> <span class="n">AggOperations</span>


<span class="k">def</span> <span class="nf">main</span> <span class="p">():</span>
    <span class="n">BoardShim</span><span class="o">.</span><span class="n">enable_dev_board_logger</span> <span class="p">()</span>

    <span class="c1"># use synthetic board for demo</span>
    <span class="n">params</span> <span class="o">=</span> <span class="n">BrainFlowInputParams</span> <span class="p">()</span>
    <span class="n">board</span> <span class="o">=</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">BoardIds</span><span class="o">.</span><span class="n">SYNTHETIC_BOARD</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="n">board</span><span class="o">.</span><span class="n">prepare_session</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">start_stream</span> <span class="p">()</span>
    <span class="n">BoardShim</span><span class="o">.</span><span class="n">log_message</span> <span class="p">(</span><span class="n">LogLevels</span><span class="o">.</span><span class="n">LEVEL_INFO</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;start sleeping in the main thread&#39;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span> <span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">get_current_board_data</span> <span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="c1"># get 20 latest data points dont remove them from internal buffer</span>
    <span class="n">board</span><span class="o">.</span><span class="n">stop_stream</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">release_session</span> <span class="p">()</span>

    <span class="c1"># demo how to convert it to pandas DF and plot data</span>
    <span class="n">eeg_channels</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">.</span><span class="n">get_eeg_channels</span> <span class="p">(</span><span class="n">BoardIds</span><span class="o">.</span><span class="n">SYNTHETIC_BOARD</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span> <span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Data From the Board&#39;</span><span class="p">)</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span> <span class="p">(</span><span class="mi">10</span><span class="p">))</span>

    <span class="c1"># demo for data serialization using brainflow API, we recommend to use it instead pandas.to_csv()</span>
    <span class="n">DataFilter</span><span class="o">.</span><span class="n">write_file</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;test.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="c1"># use &#39;a&#39; for append mode</span>
    <span class="n">restored_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="o">.</span><span class="n">read_file</span> <span class="p">(</span><span class="s1">&#39;test.csv&#39;</span><span class="p">)</span>
    <span class="n">restored_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span> <span class="p">(</span><span class="n">restored_data</span><span class="p">))</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Data From the File&#39;</span><span class="p">)</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">restored_df</span><span class="o">.</span><span class="n">head</span> <span class="p">(</span><span class="mi">10</span><span class="p">))</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span> <span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="python-downsample-data">
<h3>Python Downsample Data<a class="headerlink" href="#python-downsample-data" title="Permalink to this headline">¶</a></h3>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">brainflow</span>
<span class="kn">from</span> <span class="nn">brainflow.board_shim</span> <span class="kn">import</span> <span class="n">BoardShim</span><span class="p">,</span> <span class="n">BrainFlowInputParams</span><span class="p">,</span> <span class="n">LogLevels</span><span class="p">,</span> <span class="n">BoardIds</span>
<span class="kn">from</span> <span class="nn">brainflow.data_filter</span> <span class="kn">import</span> <span class="n">DataFilter</span><span class="p">,</span> <span class="n">FilterTypes</span><span class="p">,</span> <span class="n">AggOperations</span>


<span class="k">def</span> <span class="nf">main</span> <span class="p">():</span>
    <span class="n">BoardShim</span><span class="o">.</span><span class="n">enable_dev_board_logger</span> <span class="p">()</span>

    <span class="c1"># use synthetic board for demo</span>
    <span class="n">params</span> <span class="o">=</span> <span class="n">BrainFlowInputParams</span> <span class="p">()</span>
    <span class="n">board</span> <span class="o">=</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">BoardIds</span><span class="o">.</span><span class="n">SYNTHETIC_BOARD</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="n">board</span><span class="o">.</span><span class="n">prepare_session</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">start_stream</span> <span class="p">()</span>
    <span class="n">BoardShim</span><span class="o">.</span><span class="n">log_message</span> <span class="p">(</span><span class="n">LogLevels</span><span class="o">.</span><span class="n">LEVEL_INFO</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;start sleeping in the main thread&#39;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span> <span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">get_current_board_data</span> <span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="c1"># get 20 latest data points dont remove them from internal buffer</span>
    <span class="n">board</span><span class="o">.</span><span class="n">stop_stream</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">release_session</span> <span class="p">()</span>

    <span class="n">eeg_channels</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">.</span><span class="n">get_eeg_channels</span> <span class="p">(</span><span class="n">BoardIds</span><span class="o">.</span><span class="n">SYNTHETIC_BOARD</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="c1"># demo for downsampling, it just aggregates data</span>
    <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">channel</span> <span class="ow">in</span> <span class="nb">enumerate</span> <span class="p">(</span><span class="n">eeg_channels</span><span class="p">):</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Original data for channel </span><span class="si">%d</span><span class="s1">:&#39;</span> <span class="o">%</span> <span class="n">channel</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">downsampled_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_downsampling</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">],</span> <span class="mi">3</span><span class="p">,</span> <span class="n">AggOperations</span><span class="o">.</span><span class="n">MEDIAN</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">downsampled_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_downsampling</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="n">AggOperations</span><span class="o">.</span><span class="n">MEAN</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">downsampled_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_downsampling</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="n">AggOperations</span><span class="o">.</span><span class="n">EACH</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Downsampled data for channel </span><span class="si">%d</span><span class="s1">:&#39;</span> <span class="o">%</span> <span class="n">channel</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="n">downsampled_data</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span> <span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="python-transforms">
<h3>Python Transforms<a class="headerlink" href="#python-transforms" title="Permalink to this headline">¶</a></h3>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">brainflow</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">brainflow.board_shim</span> <span class="kn">import</span> <span class="n">BoardShim</span><span class="p">,</span> <span class="n">BrainFlowInputParams</span><span class="p">,</span> <span class="n">LogLevels</span><span class="p">,</span> <span class="n">BoardIds</span>
<span class="kn">from</span> <span class="nn">brainflow.data_filter</span> <span class="kn">import</span> <span class="n">DataFilter</span><span class="p">,</span> <span class="n">FilterTypes</span><span class="p">,</span> <span class="n">AggOperations</span>


<span class="k">def</span> <span class="nf">main</span> <span class="p">():</span>
    <span class="n">BoardShim</span><span class="o">.</span><span class="n">enable_dev_board_logger</span> <span class="p">()</span>

    <span class="c1"># use synthetic board for demo</span>
    <span class="n">params</span> <span class="o">=</span> <span class="n">BrainFlowInputParams</span> <span class="p">()</span>
    <span class="n">board_id</span> <span class="o">=</span> <span class="n">BoardIds</span><span class="o">.</span><span class="n">SYNTHETIC_BOARD</span><span class="o">.</span><span class="n">value</span>
    <span class="n">board</span> <span class="o">=</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="n">board</span><span class="o">.</span><span class="n">prepare_session</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">start_stream</span> <span class="p">()</span>
    <span class="n">BoardShim</span><span class="o">.</span><span class="n">log_message</span> <span class="p">(</span><span class="n">LogLevels</span><span class="o">.</span><span class="n">LEVEL_INFO</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;start sleeping in the main thread&#39;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span> <span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">get_board_data</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">stop_stream</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">release_session</span> <span class="p">()</span>

    <span class="n">eeg_channels</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">.</span><span class="n">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">)</span>
    <span class="c1"># demo for transforms</span>
    <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">channel</span> <span class="ow">in</span> <span class="nb">enumerate</span> <span class="p">(</span><span class="n">eeg_channels</span><span class="p">):</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Original data for channel </span><span class="si">%d</span><span class="s1">:&#39;</span> <span class="o">%</span> <span class="n">channel</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">])</span>
        <span class="c1"># demo for wavelet transforms</span>
        <span class="c1"># wavelet_coeffs format is[A(J) D(J) D(J-1) ..... D(1)] where J is decomposition level, A - app coeffs, D - detailed coeffs</span>
        <span class="c1"># lengths array stores lengths for each block</span>
        <span class="n">wavelet_coeffs</span><span class="p">,</span> <span class="n">lengths</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_wavelet_transform</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">],</span> <span class="s1">&#39;db5&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">app_coefs</span> <span class="o">=</span> <span class="n">wavelet_coeffs</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span> <span class="n">lengths</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">detailed_coeffs_first_block</span> <span class="o">=</span> <span class="n">wavelet_coeffs</span><span class="p">[</span><span class="n">lengths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">:</span> <span class="n">lengths</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="c1"># you can do smth with wavelet coeffs here, for example denoising works via thresholds </span>
        <span class="c1"># for wavelets coefficients</span>
        <span class="n">restored_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_inverse_wavelet_transform</span> <span class="p">((</span><span class="n">wavelet_coeffs</span><span class="p">,</span> <span class="n">lengths</span><span class="p">),</span> <span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;db5&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Restored data after wavelet transform for channel </span><span class="si">%d</span><span class="s1">:&#39;</span> <span class="o">%</span> <span class="n">channel</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="n">restored_data</span><span class="p">)</span>

        <span class="c1"># demo for fft, len of data must be a power of 2</span>
        <span class="n">fft_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_fft</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">][:</span><span class="mi">128</span><span class="p">])</span>
        <span class="c1"># len of fft_data is N / 2 + 1</span>
        <span class="n">restored_fft_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_ifft</span> <span class="p">(</span><span class="n">fft_data</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Restored data after fft for channel </span><span class="si">%d</span><span class="s1">:&#39;</span> <span class="o">%</span> <span class="n">channel</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="n">restored_fft_data</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span> <span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="python-signal-filtering">
<h3>Python Signal Filtering<a class="headerlink" href="#python-signal-filtering" title="Permalink to this headline">¶</a></h3>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">brainflow</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span> <span class="p">(</span><span class="s1">&#39;Agg&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">brainflow.board_shim</span> <span class="kn">import</span> <span class="n">BoardShim</span><span class="p">,</span> <span class="n">BrainFlowInputParams</span><span class="p">,</span> <span class="n">LogLevels</span><span class="p">,</span> <span class="n">BoardIds</span>
<span class="kn">from</span> <span class="nn">brainflow.data_filter</span> <span class="kn">import</span> <span class="n">DataFilter</span><span class="p">,</span> <span class="n">FilterTypes</span><span class="p">,</span> <span class="n">AggOperations</span>


<span class="k">def</span> <span class="nf">main</span> <span class="p">():</span>
    <span class="n">BoardShim</span><span class="o">.</span><span class="n">enable_dev_board_logger</span> <span class="p">()</span>

    <span class="c1"># use synthetic board for demo</span>
    <span class="n">params</span> <span class="o">=</span> <span class="n">BrainFlowInputParams</span> <span class="p">()</span>
    <span class="n">board_id</span> <span class="o">=</span> <span class="n">BoardIds</span><span class="o">.</span><span class="n">SYNTHETIC_BOARD</span><span class="o">.</span><span class="n">value</span>
    <span class="n">board</span> <span class="o">=</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="n">board</span><span class="o">.</span><span class="n">prepare_session</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">start_stream</span> <span class="p">()</span>
    <span class="n">BoardShim</span><span class="o">.</span><span class="n">log_message</span> <span class="p">(</span><span class="n">LogLevels</span><span class="o">.</span><span class="n">LEVEL_INFO</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;start sleeping in the main thread&#39;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span> <span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">get_board_data</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">stop_stream</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">release_session</span> <span class="p">()</span>

    <span class="c1"># demo how to convert it to pandas DF and plot data</span>
    <span class="n">eeg_channels</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">.</span><span class="n">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span> <span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span> <span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span> <span class="p">(</span><span class="n">subplots</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span> <span class="p">(</span><span class="s1">&#39;before_processing.png&#39;</span><span class="p">)</span>

    <span class="c1"># for demo apply different filters to different channels, in production choose one</span>
    <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">channel</span> <span class="ow">in</span> <span class="nb">enumerate</span> <span class="p">(</span><span class="n">eeg_channels</span><span class="p">):</span>
        <span class="c1"># filters work in-place</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_bandpass</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">],</span> <span class="n">BoardShim</span><span class="o">.</span><span class="n">get_sampling_rate</span> <span class="p">(</span><span class="n">board_id</span><span class="p">),</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">FilterTypes</span><span class="o">.</span><span class="n">BESSEL</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_bandstop</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">],</span> <span class="n">BoardShim</span><span class="o">.</span><span class="n">get_sampling_rate</span> <span class="p">(</span><span class="n">board_id</span><span class="p">),</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">FilterTypes</span><span class="o">.</span><span class="n">BUTTERWORTH</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_lowpass</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">],</span> <span class="n">BoardShim</span><span class="o">.</span><span class="n">get_sampling_rate</span> <span class="p">(</span><span class="n">board_id</span><span class="p">),</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">FilterTypes</span><span class="o">.</span><span class="n">CHEBYSHEV_TYPE_1</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_highpass</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">],</span> <span class="n">BoardShim</span><span class="o">.</span><span class="n">get_sampling_rate</span> <span class="p">(</span><span class="n">board_id</span><span class="p">),</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">FilterTypes</span><span class="o">.</span><span class="n">BUTTERWORTH</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_rolling_filter</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">],</span> <span class="mi">3</span><span class="p">,</span> <span class="n">AggOperations</span><span class="o">.</span><span class="n">MEAN</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_rolling_filter</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">],</span> <span class="mi">3</span><span class="p">,</span> <span class="n">AggOperations</span><span class="o">.</span><span class="n">MEDIAN</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span> <span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span> <span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span> <span class="p">(</span><span class="n">subplots</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span> <span class="p">(</span><span class="s1">&#39;after_processing.png&#39;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span> <span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="python-denoising">
<h3>Python Denoising<a class="headerlink" href="#python-denoising" title="Permalink to this headline">¶</a></h3>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">brainflow</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span> <span class="p">(</span><span class="s1">&#39;Agg&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">brainflow.board_shim</span> <span class="kn">import</span> <span class="n">BoardShim</span><span class="p">,</span> <span class="n">BrainFlowInputParams</span><span class="p">,</span> <span class="n">LogLevels</span><span class="p">,</span> <span class="n">BoardIds</span>
<span class="kn">from</span> <span class="nn">brainflow.data_filter</span> <span class="kn">import</span> <span class="n">DataFilter</span><span class="p">,</span> <span class="n">FilterTypes</span><span class="p">,</span> <span class="n">AggOperations</span>


<span class="k">def</span> <span class="nf">main</span> <span class="p">():</span>
    <span class="n">BoardShim</span><span class="o">.</span><span class="n">enable_dev_board_logger</span> <span class="p">()</span>

    <span class="c1"># use synthetic board for demo</span>
    <span class="n">params</span> <span class="o">=</span> <span class="n">BrainFlowInputParams</span> <span class="p">()</span>
    <span class="n">board_id</span> <span class="o">=</span> <span class="n">BoardIds</span><span class="o">.</span><span class="n">SYNTHETIC_BOARD</span><span class="o">.</span><span class="n">value</span>
    <span class="n">board</span> <span class="o">=</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="n">board</span><span class="o">.</span><span class="n">prepare_session</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">start_stream</span> <span class="p">()</span>
    <span class="n">BoardShim</span><span class="o">.</span><span class="n">log_message</span> <span class="p">(</span><span class="n">LogLevels</span><span class="o">.</span><span class="n">LEVEL_INFO</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;start sleeping in the main thread&#39;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span> <span class="p">(</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">get_board_data</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">stop_stream</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">release_session</span> <span class="p">()</span>

    <span class="c1"># demo how to convert it to pandas DF and plot data</span>
    <span class="n">eeg_channels</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">.</span><span class="n">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span> <span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span> <span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span> <span class="p">(</span><span class="n">subplots</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span> <span class="p">(</span><span class="s1">&#39;before_processing.png&#39;</span><span class="p">)</span>

    <span class="c1"># demo for denoising, apply different methods to different channels for demo</span>
    <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">channel</span> <span class="ow">in</span> <span class="nb">enumerate</span> <span class="p">(</span><span class="n">eeg_channels</span><span class="p">):</span>
        <span class="c1"># first of all you can try simple moving median or moving average with different window size</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_rolling_filter</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">],</span> <span class="mi">3</span><span class="p">,</span> <span class="n">AggOperations</span><span class="o">.</span><span class="n">MEAN</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_rolling_filter</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">],</span> <span class="mi">3</span><span class="p">,</span> <span class="n">AggOperations</span><span class="o">.</span><span class="n">MEDIAN</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="c1"># if methods above dont work for your signal you can try wavelet based denoising</span>
        <span class="c1"># feel free to try different functions and decomposition levels</span>
        <span class="k">elif</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_wavelet_denoising</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">],</span> <span class="s1">&#39;db6&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_wavelet_denoising</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">],</span> <span class="s1">&#39;bior3.9&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_wavelet_denoising</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">],</span> <span class="s1">&#39;sym7&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="c1"># with synthetic board this one looks like the best option, but it depends on many circumstances</span>
            <span class="n">DataFilter</span><span class="o">.</span><span class="n">perform_wavelet_denoising</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">channel</span><span class="p">],</span> <span class="s1">&#39;coif3&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
            

    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">transpose</span> <span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span> <span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span> <span class="p">(</span><span class="n">subplots</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span> <span class="p">(</span><span class="s1">&#39;after_processing.png&#39;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span> <span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="python-mne-integration">
<h3>Python MNE Integration<a class="headerlink" href="#python-mne-integration" title="Permalink to this headline">¶</a></h3>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span> <span class="p">(</span><span class="s1">&#39;Agg&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">import</span> <span class="nn">brainflow</span>
<span class="kn">from</span> <span class="nn">brainflow.board_shim</span> <span class="kn">import</span> <span class="n">BoardShim</span><span class="p">,</span> <span class="n">BrainFlowInputParams</span><span class="p">,</span> <span class="n">BoardIds</span>

<span class="kn">from</span> <span class="nn">mne.viz.topomap</span> <span class="kn">import</span> <span class="n">_prepare_topo_plot</span><span class="p">,</span> <span class="n">plot_topomap</span>
<span class="kn">import</span> <span class="nn">mne</span>
<span class="kn">from</span> <span class="nn">mne.channels</span> <span class="kn">import</span> <span class="n">read_layout</span>

<span class="kn">from</span> <span class="nn">mpl_toolkits.axes_grid1</span> <span class="kn">import</span> <span class="n">make_axes_locatable</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">BoardShim</span><span class="o">.</span><span class="n">enable_dev_board_logger</span> <span class="p">()</span>
    <span class="c1"># use synthetic board for demo</span>
    <span class="n">params</span> <span class="o">=</span> <span class="n">BrainFlowInputParams</span> <span class="p">()</span>
    <span class="n">board</span> <span class="o">=</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">BoardIds</span><span class="o">.</span><span class="n">SYNTHETIC_BOARD</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="n">board</span><span class="o">.</span><span class="n">prepare_session</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">start_stream</span> <span class="p">()</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span> <span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">get_board_data</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">stop_stream</span> <span class="p">()</span>
    <span class="n">board</span><span class="o">.</span><span class="n">release_session</span> <span class="p">()</span>

    <span class="n">eeg_channels</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">.</span><span class="n">get_eeg_channels</span> <span class="p">(</span><span class="n">BoardIds</span><span class="o">.</span><span class="n">SYNTHETIC_BOARD</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="n">eeg_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">,</span> <span class="p">:]</span>

    <span class="c1"># Creating MNE objects from brainflow data arrays</span>
    <span class="n">ch_types</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;eeg&#39;</span><span class="p">,</span> <span class="s1">&#39;eeg&#39;</span><span class="p">,</span> <span class="s1">&#39;eeg&#39;</span><span class="p">,</span> <span class="s1">&#39;eeg&#39;</span><span class="p">,</span> <span class="s1">&#39;eeg&#39;</span><span class="p">,</span> <span class="s1">&#39;eeg&#39;</span><span class="p">,</span> <span class="s1">&#39;eeg&#39;</span><span class="p">,</span> <span class="s1">&#39;eeg&#39;</span><span class="p">]</span>
    <span class="n">ch_names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;T7&#39;</span><span class="p">,</span> <span class="s1">&#39;CP5&#39;</span><span class="p">,</span> <span class="s1">&#39;FC5&#39;</span><span class="p">,</span> <span class="s1">&#39;C3&#39;</span><span class="p">,</span> <span class="s1">&#39;C4&#39;</span><span class="p">,</span> <span class="s1">&#39;FC6&#39;</span><span class="p">,</span> <span class="s1">&#39;CP6&#39;</span><span class="p">,</span> <span class="s1">&#39;T8&#39;</span><span class="p">]</span>
    <span class="n">sfreq</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">.</span><span class="n">get_sampling_rate</span> <span class="p">(</span><span class="n">BoardIds</span><span class="o">.</span><span class="n">SYNTHETIC_BOARD</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">mne</span><span class="o">.</span><span class="n">create_info</span> <span class="p">(</span><span class="n">ch_names</span> <span class="o">=</span> <span class="n">ch_names</span><span class="p">,</span> <span class="n">sfreq</span> <span class="o">=</span> <span class="n">sfreq</span><span class="p">,</span> <span class="n">ch_types</span> <span class="o">=</span> <span class="n">ch_types</span><span class="p">)</span>
    <span class="n">raw</span> <span class="o">=</span> <span class="n">mne</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">RawArray</span> <span class="p">(</span><span class="n">eeg_data</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>
    <span class="c1"># its time to plot something!</span>
    <span class="n">raw</span><span class="o">.</span><span class="n">plot_psd</span> <span class="p">(</span><span class="n">average</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span> <span class="p">(</span><span class="s1">&#39;psd.png&#39;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span> <span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="java">
<h2>Java<a class="headerlink" href="#java" title="Permalink to this headline">¶</a></h2>
<div class="section" id="java-get-data-from-a-board">
<h3>Java Get Data from a Board<a class="headerlink" href="#java-get-data-from-a-board" title="Permalink to this headline">¶</a></h3>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">brainflow.examples</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">brainflow.*</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">brainflow.BoardShim</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.BrainFlowInputParams</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.LogLevels</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BrainFlowGetData</span>
<span class="p">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span> <span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span>
    <span class="p">{</span>
        <span class="n">BoardShim</span><span class="p">.</span><span class="na">enable_board_logger</span> <span class="p">();</span>
        <span class="n">BrainFlowInputParams</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BrainFlowInputParams</span> <span class="p">();</span>
        <span class="kt">int</span> <span class="n">board_id</span> <span class="o">=</span> <span class="n">parse_args</span> <span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">params</span><span class="p">);</span>
        <span class="n">BoardShim</span> <span class="n">board_shim</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">params</span><span class="p">);</span>

        <span class="n">board_shim</span><span class="p">.</span><span class="na">prepare_session</span> <span class="p">();</span>
        <span class="c1">// board_shim.start_stream (); // use this for default options</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">start_stream</span> <span class="p">(</span><span class="mi">450000</span><span class="p">,</span> <span class="s">&quot;file://file_stream.csv:w&quot;</span><span class="p">);</span>
        <span class="n">BoardShim</span><span class="p">.</span><span class="na">log_message</span> <span class="p">(</span><span class="n">LogLevels</span><span class="p">.</span><span class="na">LEVEL_INFO</span><span class="p">.</span><span class="na">get_code</span> <span class="p">(),</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
        <span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span> <span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">stop_stream</span> <span class="p">();</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">board_shim</span><span class="p">.</span><span class="na">get_board_data_count</span> <span class="p">());</span>
        <span class="kt">int</span> <span class="n">num_rows</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="p">.</span><span class="na">get_num_rows</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
        <span class="kt">double</span><span class="o">[][]</span> <span class="n">data</span> <span class="o">=</span> <span class="n">board_shim</span><span class="p">.</span><span class="na">get_current_board_data</span> <span class="p">(</span><span class="mi">30</span><span class="p">);</span> <span class="c1">// doesnt flush it from ring buffer</span>
        <span class="c1">// double[][] data = board_shim.get_board_data (); // get all data and flush</span>
        <span class="c1">// from ring buffer</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">release_session</span> <span class="p">();</span>
    <span class="p">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">parse_args</span> <span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">,</span> <span class="n">BrainFlowInputParams</span> <span class="n">params</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">board_id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">args</span><span class="p">.</span><span class="na">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">.</span><span class="na">equals</span> <span class="p">(</span><span class="s">&quot;--ip-address&quot;</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">params</span><span class="p">.</span><span class="na">ip_address</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">.</span><span class="na">equals</span> <span class="p">(</span><span class="s">&quot;--serial-port&quot;</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">params</span><span class="p">.</span><span class="na">serial_port</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">.</span><span class="na">equals</span> <span class="p">(</span><span class="s">&quot;--ip-port&quot;</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">params</span><span class="p">.</span><span class="na">ip_port</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span> <span class="p">(</span><span class="n">args</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">.</span><span class="na">equals</span> <span class="p">(</span><span class="s">&quot;--ip-protocol&quot;</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">params</span><span class="p">.</span><span class="na">ip_protocol</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span> <span class="p">(</span><span class="n">args</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">.</span><span class="na">equals</span> <span class="p">(</span><span class="s">&quot;--other-info&quot;</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">params</span><span class="p">.</span><span class="na">other_info</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">.</span><span class="na">equals</span> <span class="p">(</span><span class="s">&quot;--board-id&quot;</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">board_id</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span> <span class="p">(</span><span class="n">args</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">board_id</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="java-read-write-file">
<h3>Java Read Write File<a class="headerlink" href="#java-read-write-file" title="Permalink to this headline">¶</a></h3>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">brainflow.examples</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">brainflow.*</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">brainflow.BoardIds</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.BoardShim</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.BrainFlowInputParams</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.DataFilter</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.LogLevels</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Serialization</span>
<span class="p">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span> <span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span>
    <span class="p">{</span>
        <span class="c1">// use Synthetic board for demo</span>
        <span class="n">BoardShim</span><span class="p">.</span><span class="na">enable_board_logger</span> <span class="p">();</span>
        <span class="n">BrainFlowInputParams</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BrainFlowInputParams</span> <span class="p">();</span>
        <span class="kt">int</span> <span class="n">board_id</span> <span class="o">=</span> <span class="n">BoardIds</span><span class="p">.</span><span class="na">SYNTHETIC_BOARD</span><span class="p">.</span><span class="na">get_code</span> <span class="p">();</span>
        <span class="n">BoardShim</span> <span class="n">board_shim</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">params</span><span class="p">);</span>

        <span class="n">board_shim</span><span class="p">.</span><span class="na">prepare_session</span> <span class="p">();</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">start_stream</span> <span class="p">(</span><span class="mi">3600</span><span class="p">);</span>
        <span class="n">BoardShim</span><span class="p">.</span><span class="na">log_message</span> <span class="p">(</span><span class="n">LogLevels</span><span class="p">.</span><span class="na">LEVEL_INFO</span><span class="p">.</span><span class="na">get_code</span> <span class="p">(),</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
        <span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span> <span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">stop_stream</span> <span class="p">();</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">board_shim</span><span class="p">.</span><span class="na">get_board_data_count</span> <span class="p">());</span>
        <span class="kt">int</span> <span class="n">num_rows</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="p">.</span><span class="na">get_num_rows</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
        <span class="kt">double</span><span class="o">[][]</span> <span class="n">data</span> <span class="o">=</span> <span class="n">board_shim</span><span class="p">.</span><span class="na">get_current_board_data</span> <span class="p">(</span><span class="mi">30</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">release_session</span> <span class="p">();</span>

        <span class="c1">// demo for serialization</span>
        <span class="n">DataFilter</span><span class="p">.</span><span class="na">write_file</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s">&quot;test.csv&quot;</span><span class="p">,</span> <span class="s">&quot;w&quot;</span><span class="p">);</span>
        <span class="kt">double</span><span class="o">[][]</span> <span class="n">restored_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="na">read_file</span> <span class="p">(</span><span class="s">&quot;test.csv&quot;</span><span class="p">);</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="s">&quot;After Serialization:&quot;</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span> <span class="p">(</span><span class="n">restored_data</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="java-downsample-data">
<h3>Java Downsample Data<a class="headerlink" href="#java-downsample-data" title="Permalink to this headline">¶</a></h3>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">brainflow.examples</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">brainflow.*</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">brainflow.AggOperations</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.BoardIds</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.BoardShim</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.BrainFlowInputParams</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.DataFilter</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.LogLevels</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Downsampling</span>
<span class="p">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span> <span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span>
    <span class="p">{</span>
        <span class="c1">// use synthetic board for demo</span>
        <span class="n">BoardShim</span><span class="p">.</span><span class="na">enable_board_logger</span> <span class="p">();</span>
        <span class="n">BrainFlowInputParams</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BrainFlowInputParams</span> <span class="p">();</span>
        <span class="kt">int</span> <span class="n">board_id</span> <span class="o">=</span> <span class="n">BoardIds</span><span class="p">.</span><span class="na">SYNTHETIC_BOARD</span><span class="p">.</span><span class="na">get_code</span> <span class="p">();</span>

        <span class="n">BoardShim</span> <span class="n">board_shim</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">params</span><span class="p">);</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">prepare_session</span> <span class="p">();</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">start_stream</span> <span class="p">(</span><span class="mi">3600</span><span class="p">);</span>
        <span class="n">BoardShim</span><span class="p">.</span><span class="na">log_message</span> <span class="p">(</span><span class="n">LogLevels</span><span class="p">.</span><span class="na">LEVEL_INFO</span><span class="p">.</span><span class="na">get_code</span> <span class="p">(),</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
        <span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span> <span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">stop_stream</span> <span class="p">();</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">board_shim</span><span class="p">.</span><span class="na">get_board_data_count</span> <span class="p">());</span>
        <span class="kt">double</span><span class="o">[][]</span> <span class="n">data</span> <span class="o">=</span> <span class="n">board_shim</span><span class="p">.</span><span class="na">get_current_board_data</span> <span class="p">(</span><span class="mi">30</span><span class="p">);</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">release_session</span> <span class="p">();</span>

        <span class="kt">int</span><span class="o">[]</span> <span class="n">eeg_channels</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="p">.</span><span class="na">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">eeg_channels</span><span class="p">.</span><span class="na">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="s">&quot;Original data:&quot;</span><span class="p">);</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">));</span>
            <span class="c1">// keep each second element, you can use MEAN and MEDIAN as well</span>
            <span class="kt">double</span><span class="o">[]</span> <span class="n">downsampled_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="na">perform_downsampling</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">eeg_channels</span><span class="o">[</span><span class="n">i</span><span class="o">]]</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="n">AggOperations</span><span class="p">.</span><span class="na">EACH</span><span class="p">.</span><span class="na">get_code</span> <span class="p">());</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="s">&quot;Downsampled data:&quot;</span><span class="p">);</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span> <span class="p">(</span><span class="n">downsampled_data</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="java-transforms">
<h3>Java Transforms<a class="headerlink" href="#java-transforms" title="Permalink to this headline">¶</a></h3>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">brainflow.examples</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">brainflow.*</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.apache.commons.lang3.tuple.Pair</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.math3.complex.Complex</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">brainflow.BoardIds</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.BoardShim</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.BrainFlowInputParams</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.DataFilter</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.LogLevels</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Transforms</span>
<span class="p">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span> <span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span>
    <span class="p">{</span>
        <span class="c1">// use synthetic board for demo</span>
        <span class="n">BoardShim</span><span class="p">.</span><span class="na">enable_board_logger</span> <span class="p">();</span>
        <span class="n">BrainFlowInputParams</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BrainFlowInputParams</span> <span class="p">();</span>
        <span class="kt">int</span> <span class="n">board_id</span> <span class="o">=</span> <span class="n">BoardIds</span><span class="p">.</span><span class="na">SYNTHETIC_BOARD</span><span class="p">.</span><span class="na">get_code</span> <span class="p">();</span>
        <span class="n">BoardShim</span> <span class="n">board_shim</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">params</span><span class="p">);</span>

        <span class="n">board_shim</span><span class="p">.</span><span class="na">prepare_session</span> <span class="p">();</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">start_stream</span> <span class="p">(</span><span class="mi">3600</span><span class="p">);</span>
        <span class="n">BoardShim</span><span class="p">.</span><span class="na">log_message</span> <span class="p">(</span><span class="n">LogLevels</span><span class="p">.</span><span class="na">LEVEL_INFO</span><span class="p">.</span><span class="na">get_code</span> <span class="p">(),</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
        <span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span> <span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">stop_stream</span> <span class="p">();</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">board_shim</span><span class="p">.</span><span class="na">get_board_data_count</span> <span class="p">());</span>
        <span class="kt">int</span> <span class="n">num_rows</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="p">.</span><span class="na">get_num_rows</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
        <span class="kt">double</span><span class="o">[][]</span> <span class="n">data</span> <span class="o">=</span> <span class="n">board_shim</span><span class="p">.</span><span class="na">get_current_board_data</span> <span class="p">(</span><span class="mi">64</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">release_session</span> <span class="p">();</span>

        <span class="kt">int</span><span class="o">[]</span> <span class="n">eeg_channels</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="p">.</span><span class="na">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">eeg_channels</span><span class="p">.</span><span class="na">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="s">&quot;Original data:&quot;</span><span class="p">);</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">eeg_channels</span><span class="o">[</span><span class="n">i</span><span class="o">]]</span><span class="p">));</span>
            <span class="c1">// demo for wavelet transform</span>
            <span class="c1">// Pair of coeffs array in format[A(J) D(J) D(J-1) ..... D(1)] where J is a</span>
            <span class="c1">// decomposition level, A - app coeffs, D - detailed coeffs, and array which</span>
            <span class="c1">// stores</span>
            <span class="c1">// length for each block, len of this array is decomposition_length + 1</span>
            <span class="n">Pair</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">[]</span><span class="p">,</span> <span class="kt">int</span><span class="o">[]&gt;</span> <span class="n">wavelet_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="na">perform_wavelet_transform</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">eeg_channels</span><span class="o">[</span><span class="n">i</span><span class="o">]]</span><span class="p">,</span> <span class="s">&quot;db4&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
            <span class="c1">// print approximation coeffs</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">wavelet_data</span><span class="p">.</span><span class="na">getRight</span> <span class="p">()</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span> <span class="p">(</span><span class="n">wavelet_data</span><span class="p">.</span><span class="na">getLeft</span> <span class="p">()</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">();</span>
            <span class="c1">// you can do smth with these coeffs here, for example denoising works via</span>
            <span class="c1">// thresholds for wavelet coeffs</span>
            <span class="kt">double</span><span class="o">[]</span> <span class="n">restored_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="na">perform_inverse_wavelet_transform</span> <span class="p">(</span><span class="n">wavelet_data</span><span class="p">,</span>
                    <span class="n">data</span><span class="o">[</span><span class="n">eeg_channels</span><span class="o">[</span><span class="n">i</span><span class="o">]]</span><span class="p">.</span><span class="na">length</span><span class="p">,</span> <span class="s">&quot;db4&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="s">&quot;Restored data after wavelet:&quot;</span><span class="p">);</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span> <span class="p">(</span><span class="n">restored_data</span><span class="p">));</span>

            <span class="c1">// demo for fft works only for power of 2</span>
            <span class="c1">// len of fft_data is N / 2 + 1</span>
            <span class="n">Complex</span><span class="o">[]</span> <span class="n">fft_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="na">perform_fft</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">eeg_channels</span><span class="o">[</span><span class="n">i</span><span class="o">]]</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">64</span><span class="p">);</span>
            <span class="kt">double</span><span class="o">[]</span> <span class="n">restored_fft_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="na">perform_ifft</span> <span class="p">(</span><span class="n">fft_data</span><span class="p">);</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="s">&quot;Restored data after fft:&quot;</span><span class="p">);</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span> <span class="p">(</span><span class="n">restored_fft_data</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="java-signal-filtering">
<h3>Java Signal Filtering<a class="headerlink" href="#java-signal-filtering" title="Permalink to this headline">¶</a></h3>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">brainflow.examples</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">brainflow.*</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">brainflow.BoardIds</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.BoardShim</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.BrainFlowInputParams</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.DataFilter</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.FilterTypes</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.LogLevels</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SignalFiltering</span>
<span class="p">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span> <span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span>
    <span class="p">{</span>
        <span class="c1">// use synthetic board for demo</span>
        <span class="n">BoardShim</span><span class="p">.</span><span class="na">enable_board_logger</span> <span class="p">();</span>
        <span class="n">BrainFlowInputParams</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BrainFlowInputParams</span> <span class="p">();</span>
        <span class="kt">int</span> <span class="n">board_id</span> <span class="o">=</span> <span class="n">BoardIds</span><span class="p">.</span><span class="na">SYNTHETIC_BOARD</span><span class="p">.</span><span class="na">get_code</span> <span class="p">();</span>
        <span class="n">BoardShim</span> <span class="n">board_shim</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">params</span><span class="p">);</span>

        <span class="n">board_shim</span><span class="p">.</span><span class="na">prepare_session</span> <span class="p">();</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">start_stream</span> <span class="p">(</span><span class="mi">3600</span><span class="p">);</span>
        <span class="n">BoardShim</span><span class="p">.</span><span class="na">log_message</span> <span class="p">(</span><span class="n">LogLevels</span><span class="p">.</span><span class="na">LEVEL_INFO</span><span class="p">.</span><span class="na">get_code</span> <span class="p">(),</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
        <span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span> <span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">stop_stream</span> <span class="p">();</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">board_shim</span><span class="p">.</span><span class="na">get_board_data_count</span> <span class="p">());</span>
        <span class="kt">int</span> <span class="n">num_rows</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="p">.</span><span class="na">get_num_rows</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
        <span class="kt">double</span><span class="o">[][]</span> <span class="n">data</span> <span class="o">=</span> <span class="n">board_shim</span><span class="p">.</span><span class="na">get_current_board_data</span> <span class="p">(</span><span class="mi">30</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">release_session</span> <span class="p">();</span>

        <span class="kt">int</span><span class="o">[]</span> <span class="n">eeg_channels</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="p">.</span><span class="na">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">eeg_channels</span><span class="p">.</span><span class="na">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// just for demo - apply different filters to different eeg channels</span>
            <span class="k">switch</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">case</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">DataFilter</span><span class="p">.</span><span class="na">perform_lowpass</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">eeg_channels</span><span class="o">[</span><span class="n">i</span><span class="o">]]</span><span class="p">,</span> <span class="n">BoardShim</span><span class="p">.</span><span class="na">get_sampling_rate</span> <span class="p">(</span><span class="n">board_id</span><span class="p">),</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                            <span class="n">FilterTypes</span><span class="p">.</span><span class="na">BESSEL</span><span class="p">.</span><span class="na">get_code</span> <span class="p">(),</span> <span class="mf">0.0</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">DataFilter</span><span class="p">.</span><span class="na">perform_highpass</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">eeg_channels</span><span class="o">[</span><span class="n">i</span><span class="o">]]</span><span class="p">,</span> <span class="n">BoardShim</span><span class="p">.</span><span class="na">get_sampling_rate</span> <span class="p">(</span><span class="n">board_id</span><span class="p">),</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                            <span class="n">FilterTypes</span><span class="p">.</span><span class="na">BUTTERWORTH</span><span class="p">.</span><span class="na">get_code</span> <span class="p">(),</span> <span class="mf">0.0</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">DataFilter</span><span class="p">.</span><span class="na">perform_bandpass</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">eeg_channels</span><span class="o">[</span><span class="n">i</span><span class="o">]]</span><span class="p">,</span> <span class="n">BoardShim</span><span class="p">.</span><span class="na">get_sampling_rate</span> <span class="p">(</span><span class="n">board_id</span><span class="p">),</span> <span class="mf">15.0</span><span class="p">,</span>
                            <span class="mf">5.0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">FilterTypes</span><span class="p">.</span><span class="na">CHEBYSHEV_TYPE_1</span><span class="p">.</span><span class="na">get_code</span> <span class="p">(),</span> <span class="mf">1.0</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">DataFilter</span><span class="p">.</span><span class="na">perform_bandstop</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">eeg_channels</span><span class="o">[</span><span class="n">i</span><span class="o">]]</span><span class="p">,</span> <span class="n">BoardShim</span><span class="p">.</span><span class="na">get_sampling_rate</span> <span class="p">(</span><span class="n">board_id</span><span class="p">),</span> <span class="mf">50.0</span><span class="p">,</span>
                            <span class="mf">1.0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">FilterTypes</span><span class="p">.</span><span class="na">CHEBYSHEV_TYPE_1</span><span class="p">.</span><span class="na">get_code</span> <span class="p">(),</span> <span class="mf">1.0</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="s">&quot;After signal processing:&quot;</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="java-denoising">
<h3>Java Denoising<a class="headerlink" href="#java-denoising" title="Permalink to this headline">¶</a></h3>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">brainflow.examples</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">brainflow.*</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">brainflow.AggOperations</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.BoardIds</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.BoardShim</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.BrainFlowInputParams</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.DataFilter</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">brainflow.LogLevels</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Denoising</span>
<span class="p">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span> <span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span>
    <span class="p">{</span>
        <span class="c1">// use synthetic board for demo</span>
        <span class="n">BoardShim</span><span class="p">.</span><span class="na">enable_board_logger</span> <span class="p">();</span>
        <span class="n">BrainFlowInputParams</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BrainFlowInputParams</span> <span class="p">();</span>
        <span class="kt">int</span> <span class="n">board_id</span> <span class="o">=</span> <span class="n">BoardIds</span><span class="p">.</span><span class="na">SYNTHETIC_BOARD</span><span class="p">.</span><span class="na">get_code</span> <span class="p">();</span>
        <span class="n">BoardShim</span> <span class="n">board_shim</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">params</span><span class="p">);</span>

        <span class="n">board_shim</span><span class="p">.</span><span class="na">prepare_session</span> <span class="p">();</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">start_stream</span> <span class="p">(</span><span class="mi">3600</span><span class="p">);</span>
        <span class="n">BoardShim</span><span class="p">.</span><span class="na">log_message</span> <span class="p">(</span><span class="n">LogLevels</span><span class="p">.</span><span class="na">LEVEL_INFO</span><span class="p">.</span><span class="na">get_code</span> <span class="p">(),</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
        <span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span> <span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">stop_stream</span> <span class="p">();</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">board_shim</span><span class="p">.</span><span class="na">get_board_data_count</span> <span class="p">());</span>
        <span class="kt">int</span> <span class="n">num_rows</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="p">.</span><span class="na">get_num_rows</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
        <span class="kt">double</span><span class="o">[][]</span> <span class="n">data</span> <span class="o">=</span> <span class="n">board_shim</span><span class="p">.</span><span class="na">get_current_board_data</span> <span class="p">(</span><span class="mi">64</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="n">board_shim</span><span class="p">.</span><span class="na">release_session</span> <span class="p">();</span>

        <span class="kt">int</span><span class="o">[]</span> <span class="n">eeg_channels</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="p">.</span><span class="na">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">eeg_channels</span><span class="p">.</span><span class="na">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// just for demo - apply different methods to different eeg channels</span>
            <span class="k">switch</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="c1">// first of all you can try simple moving average or moving median</span>
                <span class="k">case</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">DataFilter</span><span class="p">.</span><span class="na">perform_rolling_filter</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">eeg_channels</span><span class="o">[</span><span class="n">i</span><span class="o">]]</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">AggOperations</span><span class="p">.</span><span class="na">MEAN</span><span class="p">.</span><span class="na">get_code</span> <span class="p">());</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">DataFilter</span><span class="p">.</span><span class="na">perform_rolling_filter</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">eeg_channels</span><span class="o">[</span><span class="n">i</span><span class="o">]]</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">AggOperations</span><span class="p">.</span><span class="na">MEDIAN</span><span class="p">.</span><span class="na">get_code</span> <span class="p">());</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="c1">// if methods above dont work good for you you should try wavelet based</span>
                <span class="c1">// denoising</span>
                <span class="k">default</span><span class="p">:</span>
                    <span class="c1">// try different functions and different decomposition levels here</span>
                    <span class="n">DataFilter</span><span class="p">.</span><span class="na">perform_wavelet_denoising</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">eeg_channels</span><span class="o">[</span><span class="n">i</span><span class="o">]]</span><span class="p">,</span> <span class="s">&quot;db4&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="s">&quot;After signal processing:&quot;</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span> <span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span> <span class="p">(</span><span class="n">data</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="c">
<h2>C#<a class="headerlink" href="#c" title="Permalink to this headline">¶</a></h2>
<div class="section" id="c-read-data-from-a-board">
<h3>C# Read Data from a Board<a class="headerlink" href="#c-read-data-from-a-board" title="Permalink to this headline">¶</a></h3>
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">brainflow</span><span class="p">;</span>

<span class="k">using</span> <span class="nn">Accord.Math</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">test</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">GetBoardData</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">BoardShim</span><span class="p">.</span><span class="n">enable_dev_board_logger</span> <span class="p">();</span>

            <span class="n">BrainFlowInputParams</span> <span class="n">input_params</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BrainFlowInputParams</span> <span class="p">();</span>
            <span class="kt">int</span> <span class="n">board_id</span> <span class="p">=</span> <span class="n">parse_args</span> <span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">input_params</span><span class="p">);</span>

            <span class="n">BoardShim</span> <span class="n">board_shim</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">input_params</span><span class="p">);</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">prepare_session</span> <span class="p">();</span>
            <span class="c1">// board_shim.start_stream (); // use this for default options</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">start_stream</span> <span class="p">(</span><span class="m">450000</span><span class="p">,</span> <span class="s">&quot;file://file_stream.csv:w&quot;</span><span class="p">);</span>
            <span class="n">BoardShim</span><span class="p">.</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="p">.</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
            <span class="n">System</span><span class="p">.</span><span class="n">Threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span> <span class="p">(</span><span class="m">5000</span><span class="p">);</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">stop_stream</span> <span class="p">();</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;data count: {0}&quot;</span><span class="p">,</span> <span class="n">board_shim</span><span class="p">.</span><span class="n">get_board_data_count</span> <span class="p">());</span>
            <span class="kt">double</span><span class="p">[,]</span> <span class="n">unprocessed_data</span> <span class="p">=</span> <span class="n">board_shim</span><span class="p">.</span><span class="n">get_current_board_data</span> <span class="p">(</span><span class="m">20</span><span class="p">);</span>
            <span class="kt">int</span><span class="p">[]</span> <span class="n">eeg_channels</span> <span class="p">=</span> <span class="n">BoardShim</span><span class="p">.</span><span class="n">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">index</span> <span class="k">in</span> <span class="n">eeg_channels</span><span class="p">)</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span> <span class="p">(</span><span class="n">index</span><span class="p">)));</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">release_session</span> <span class="p">();</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">int</span> <span class="nf">parse_args</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">,</span> <span class="n">BrainFlowInputParams</span> <span class="n">input_params</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">board_id</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">BoardIds</span><span class="p">.</span><span class="n">SYNTHETIC_BOARD</span><span class="p">;</span> <span class="c1">//assume synthetic board by default</span>
            <span class="c1">// use docs to get params for your specific board, e.g. set serial_port for Cyton</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">args</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">Equals</span> <span class="p">(</span><span class="s">&quot;--ip-address&quot;</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">input_params</span><span class="p">.</span><span class="n">ip_address</span> <span class="p">=</span> <span class="n">args</span><span class="p">[</span><span class="n">i</span> <span class="p">+</span> <span class="m">1</span><span class="p">];</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">Equals</span> <span class="p">(</span><span class="s">&quot;--mac-address&quot;</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">input_params</span><span class="p">.</span><span class="n">mac_address</span> <span class="p">=</span> <span class="n">args</span><span class="p">[</span><span class="n">i</span> <span class="p">+</span> <span class="m">1</span><span class="p">];</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">Equals</span> <span class="p">(</span><span class="s">&quot;--serial-port&quot;</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">input_params</span><span class="p">.</span><span class="n">serial_port</span> <span class="p">=</span> <span class="n">args</span><span class="p">[</span><span class="n">i</span> <span class="p">+</span> <span class="m">1</span><span class="p">];</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">Equals</span> <span class="p">(</span><span class="s">&quot;--other-info&quot;</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">input_params</span><span class="p">.</span><span class="n">other_info</span> <span class="p">=</span> <span class="n">args</span><span class="p">[</span><span class="n">i</span> <span class="p">+</span> <span class="m">1</span><span class="p">];</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">Equals</span> <span class="p">(</span><span class="s">&quot;--ip-port&quot;</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">input_params</span><span class="p">.</span><span class="n">ip_port</span> <span class="p">=</span> <span class="n">Convert</span><span class="p">.</span><span class="n">ToInt32</span> <span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="n">i</span> <span class="p">+</span> <span class="m">1</span><span class="p">]);</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">Equals</span> <span class="p">(</span><span class="s">&quot;--ip-protocol&quot;</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">input_params</span><span class="p">.</span><span class="n">ip_protocol</span> <span class="p">=</span> <span class="n">Convert</span><span class="p">.</span><span class="n">ToInt32</span> <span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="n">i</span> <span class="p">+</span> <span class="m">1</span><span class="p">]);</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">Equals</span> <span class="p">(</span><span class="s">&quot;--board-id&quot;</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">board_id</span> <span class="p">=</span> <span class="n">Convert</span><span class="p">.</span><span class="n">ToInt32</span> <span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="n">i</span> <span class="p">+</span> <span class="m">1</span><span class="p">]);</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">board_id</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="c-read-write-file">
<h3>C# Read Write File<a class="headerlink" href="#c-read-write-file" title="Permalink to this headline">¶</a></h3>
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">brainflow</span><span class="p">;</span>

<span class="k">using</span> <span class="nn">Accord.Math</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">test</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">GetBoardData</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// use synthetic board for demo</span>
            <span class="n">BoardShim</span><span class="p">.</span><span class="n">enable_dev_board_logger</span> <span class="p">();</span>
            <span class="n">BrainFlowInputParams</span> <span class="n">input_params</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BrainFlowInputParams</span> <span class="p">();</span>
            <span class="kt">int</span> <span class="n">board_id</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">BoardIds</span><span class="p">.</span><span class="n">SYNTHETIC_BOARD</span><span class="p">;</span>

            <span class="n">BoardShim</span> <span class="n">board_shim</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">input_params</span><span class="p">);</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">prepare_session</span> <span class="p">();</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">start_stream</span> <span class="p">(</span><span class="m">3600</span><span class="p">);</span>
            <span class="n">BoardShim</span><span class="p">.</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="p">.</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
            <span class="n">System</span><span class="p">.</span><span class="n">Threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span> <span class="p">(</span><span class="m">5000</span><span class="p">);</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">stop_stream</span> <span class="p">();</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;data count: {0}&quot;</span><span class="p">,</span> <span class="n">board_shim</span><span class="p">.</span><span class="n">get_board_data_count</span> <span class="p">());</span>
            <span class="kt">double</span><span class="p">[,]</span> <span class="n">unprocessed_data</span> <span class="p">=</span> <span class="n">board_shim</span><span class="p">.</span><span class="n">get_current_board_data</span> <span class="p">(</span><span class="m">20</span><span class="p">);</span>
            <span class="kt">int</span><span class="p">[]</span> <span class="n">eeg_channels</span> <span class="p">=</span> <span class="n">BoardShim</span><span class="p">.</span><span class="n">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;Before serialization:&quot;</span><span class="p">);</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">index</span> <span class="k">in</span> <span class="n">eeg_channels</span><span class="p">)</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span> <span class="p">(</span><span class="n">index</span><span class="p">)));</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">release_session</span> <span class="p">();</span>

            <span class="c1">// demo for data serialization</span>
            <span class="n">DataFilter</span><span class="p">.</span><span class="n">write_file</span> <span class="p">(</span><span class="n">unprocessed_data</span><span class="p">,</span> <span class="s">&quot;test.csv&quot;</span><span class="p">,</span> <span class="s">&quot;w&quot;</span><span class="p">);</span>
            <span class="kt">double</span><span class="p">[,]</span> <span class="n">restored_data</span> <span class="p">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="n">read_file</span> <span class="p">(</span><span class="s">&quot;test.csv&quot;</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;After Serialization:&quot;</span><span class="p">);</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">index</span> <span class="k">in</span> <span class="n">eeg_channels</span><span class="p">)</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">restored_data</span><span class="p">.</span><span class="n">GetRow</span> <span class="p">(</span><span class="n">index</span><span class="p">)));</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="c-downsample-data">
<h3>C# Downsample Data<a class="headerlink" href="#c-downsample-data" title="Permalink to this headline">¶</a></h3>
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">brainflow</span><span class="p">;</span>

<span class="k">using</span> <span class="nn">Accord.Math</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">test</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">GetBoardData</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// use synthetic board for demo</span>
            <span class="n">BoardShim</span><span class="p">.</span><span class="n">enable_dev_board_logger</span> <span class="p">();</span>
            <span class="n">BrainFlowInputParams</span> <span class="n">input_params</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BrainFlowInputParams</span> <span class="p">();</span>
            <span class="kt">int</span> <span class="n">board_id</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">BoardIds</span><span class="p">.</span><span class="n">SYNTHETIC_BOARD</span><span class="p">;</span>

            <span class="n">BoardShim</span> <span class="n">board_shim</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">input_params</span><span class="p">);</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">prepare_session</span> <span class="p">();</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">start_stream</span> <span class="p">(</span><span class="m">3600</span><span class="p">);</span>
            <span class="n">BoardShim</span><span class="p">.</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="p">.</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
            <span class="n">System</span><span class="p">.</span><span class="n">Threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span> <span class="p">(</span><span class="m">5000</span><span class="p">);</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">stop_stream</span> <span class="p">();</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;data count: {0}&quot;</span><span class="p">,</span> <span class="n">board_shim</span><span class="p">.</span><span class="n">get_board_data_count</span> <span class="p">());</span>
            <span class="kt">double</span><span class="p">[,]</span> <span class="n">unprocessed_data</span> <span class="p">=</span> <span class="n">board_shim</span><span class="p">.</span><span class="n">get_current_board_data</span> <span class="p">(</span><span class="m">20</span><span class="p">);</span>
            <span class="kt">int</span><span class="p">[]</span> <span class="n">eeg_channels</span> <span class="p">=</span> <span class="n">BoardShim</span><span class="p">.</span><span class="n">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">release_session</span> <span class="p">();</span>

            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">eeg_channels</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;Before processing:&quot;</span><span class="p">);</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span><span class="p">(</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">])));</span>
                <span class="c1">// you can use MEAN, MEDIAN or EACH for downsampling</span>
                <span class="kt">double</span><span class="p">[]</span> <span class="n">filtered</span> <span class="p">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="n">perform_downsampling</span> <span class="p">(</span><span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span> <span class="p">(</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="m">3</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">AggOperations</span><span class="p">.</span><span class="n">MEDIAN</span><span class="p">);</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;Before processing:&quot;</span><span class="p">);</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">filtered</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="c-transforms">
<h3>C# Transforms<a class="headerlink" href="#c-transforms" title="Permalink to this headline">¶</a></h3>
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Numerics</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">brainflow</span><span class="p">;</span>

<span class="k">using</span> <span class="nn">Accord.Math</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">test</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">GetBoardData</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// use synthetic board for demo</span>
            <span class="n">BoardShim</span><span class="p">.</span><span class="n">enable_dev_board_logger</span> <span class="p">();</span>
            <span class="n">BrainFlowInputParams</span> <span class="n">input_params</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BrainFlowInputParams</span> <span class="p">();</span>
            <span class="kt">int</span> <span class="n">board_id</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">BoardIds</span><span class="p">.</span><span class="n">SYNTHETIC_BOARD</span><span class="p">;</span>

            <span class="n">BoardShim</span> <span class="n">board_shim</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">input_params</span><span class="p">);</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">prepare_session</span> <span class="p">();</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">start_stream</span> <span class="p">(</span><span class="m">3600</span><span class="p">);</span>
            <span class="n">BoardShim</span><span class="p">.</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="p">.</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
            <span class="n">System</span><span class="p">.</span><span class="n">Threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span> <span class="p">(</span><span class="m">5000</span><span class="p">);</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">stop_stream</span> <span class="p">();</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;data count: {0}&quot;</span><span class="p">,</span> <span class="n">board_shim</span><span class="p">.</span><span class="n">get_board_data_count</span> <span class="p">());</span>
            <span class="kt">double</span><span class="p">[,]</span> <span class="n">unprocessed_data</span> <span class="p">=</span> <span class="n">board_shim</span><span class="p">.</span><span class="n">get_current_board_data</span> <span class="p">(</span><span class="m">64</span><span class="p">);</span>
            <span class="kt">int</span><span class="p">[]</span> <span class="n">eeg_channels</span> <span class="p">=</span> <span class="n">BoardShim</span><span class="p">.</span><span class="n">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">release_session</span> <span class="p">();</span>

            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">eeg_channels</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;Original data:&quot;</span><span class="p">);</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span> <span class="p">(</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">])));</span>
                <span class="c1">// demo for wavelet transform</span>
                <span class="c1">// tuple of coeffs array in format[A(J) D(J) D(J-1) ..... D(1)] where J is a</span>
                <span class="c1">// decomposition level, A - app coeffs, D - detailed coeffs, and array which stores</span>
                <span class="c1">// length for each block, len of this array is decomposition_length + 1</span>
                <span class="n">Tuple</span><span class="p">&lt;</span><span class="kt">double</span><span class="p">[],</span> <span class="kt">int</span><span class="p">[]&gt;</span> <span class="n">wavelet_data</span> <span class="p">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="n">perform_wavelet_transform</span><span class="p">(</span><span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span> <span class="p">(</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="s">&quot;db4&quot;</span><span class="p">,</span> <span class="m">3</span><span class="p">);</span>
                <span class="c1">// print app coeffs</span>
                <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">j</span> <span class="p">&lt;</span> <span class="n">wavelet_data</span><span class="p">.</span><span class="n">Item2</span><span class="p">[</span><span class="m">0</span><span class="p">];</span> <span class="n">j</span><span class="p">++)</span>
                <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="n">Write</span> <span class="p">(</span><span class="n">wavelet_data</span><span class="p">.</span><span class="n">Item1</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="p">+</span> <span class="s">&quot; &quot;</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">();</span>
                <span class="c1">// you can do smth with wavelet coeffs here, for example denoising works via thresholds for wavelets coeffs</span>
                <span class="kt">double</span><span class="p">[]</span> <span class="n">restored_data</span> <span class="p">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="n">perform_inverse_wavelet_transform</span> <span class="p">(</span><span class="n">wavelet_data</span><span class="p">,</span> <span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span> <span class="p">(</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]).</span><span class="n">Length</span><span class="p">,</span> <span class="s">&quot;db4&quot;</span><span class="p">,</span> <span class="m">3</span><span class="p">);</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;Restored wavelet data:&quot;</span><span class="p">);</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">restored_data</span><span class="p">));</span>

                <span class="c1">// demo for fft</span>
                <span class="c1">// end_pos - start_pos must be a power of 2</span>
                <span class="n">Complex</span><span class="p">[]</span> <span class="n">fft_data</span> <span class="p">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="n">perform_fft</span> <span class="p">(</span><span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span> <span class="p">(</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="m">0</span><span class="p">,</span> <span class="m">64</span><span class="p">);</span>
                <span class="c1">// len of fft_data is N / 2 + 1</span>
                <span class="kt">double</span><span class="p">[]</span> <span class="n">restored_fft_data</span> <span class="p">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="n">perform_ifft</span> <span class="p">(</span><span class="n">fft_data</span><span class="p">);</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;Restored fft data:&quot;</span><span class="p">);</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">restored_fft_data</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="c-signal-filtering">
<h3>C# Signal Filtering<a class="headerlink" href="#c-signal-filtering" title="Permalink to this headline">¶</a></h3>
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">brainflow</span><span class="p">;</span>

<span class="k">using</span> <span class="nn">Accord.Math</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">test</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">GetBoardData</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// use synthetic board for demo</span>
            <span class="n">BoardShim</span><span class="p">.</span><span class="n">enable_dev_board_logger</span> <span class="p">();</span>
            <span class="n">BrainFlowInputParams</span> <span class="n">input_params</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BrainFlowInputParams</span> <span class="p">();</span>
            <span class="kt">int</span> <span class="n">board_id</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">BoardIds</span><span class="p">.</span><span class="n">SYNTHETIC_BOARD</span><span class="p">;</span>

            <span class="n">BoardShim</span> <span class="n">board_shim</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">input_params</span><span class="p">);</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">prepare_session</span> <span class="p">();</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">start_stream</span> <span class="p">(</span><span class="m">3600</span><span class="p">);</span>
            <span class="n">BoardShim</span><span class="p">.</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="p">.</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
            <span class="n">System</span><span class="p">.</span><span class="n">Threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span> <span class="p">(</span><span class="m">5000</span><span class="p">);</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">stop_stream</span> <span class="p">();</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;data count: {0}&quot;</span><span class="p">,</span> <span class="n">board_shim</span><span class="p">.</span><span class="n">get_board_data_count</span> <span class="p">());</span>
            <span class="kt">double</span><span class="p">[,]</span> <span class="n">unprocessed_data</span> <span class="p">=</span> <span class="n">board_shim</span><span class="p">.</span><span class="n">get_current_board_data</span> <span class="p">(</span><span class="m">20</span><span class="p">);</span>
            <span class="kt">int</span><span class="p">[]</span> <span class="n">eeg_channels</span> <span class="p">=</span> <span class="n">BoardShim</span><span class="p">.</span><span class="n">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">release_session</span> <span class="p">();</span>

            <span class="c1">// for demo apply different filters to different channels</span>
            <span class="kt">double</span><span class="p">[]</span> <span class="n">filtered</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">eeg_channels</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;Before processing:&quot;</span><span class="p">);</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span> <span class="p">(</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">])));</span>
                <span class="k">switch</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">case</span> <span class="m">0</span><span class="p">:</span>
                        <span class="n">filtered</span> <span class="p">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="n">perform_lowpass</span> <span class="p">(</span><span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span><span class="p">(</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="n">BoardShim</span><span class="p">.</span><span class="n">get_sampling_rate</span> <span class="p">(</span><span class="n">board_id</span><span class="p">),</span> <span class="m">20.0</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">FilterTypes</span><span class="p">.</span><span class="n">BESSEL</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
                        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;Filtered channel &quot;</span> <span class="p">+</span> <span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">filtered</span><span class="p">));</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="k">case</span> <span class="m">1</span><span class="p">:</span>
                        <span class="n">filtered</span> <span class="p">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="n">perform_highpass</span> <span class="p">(</span><span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span> <span class="p">(</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="n">BoardShim</span><span class="p">.</span><span class="n">get_sampling_rate</span> <span class="p">(</span><span class="n">board_id</span><span class="p">),</span> <span class="m">2.0</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">FilterTypes</span><span class="p">.</span><span class="n">BUTTERWORTH</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
                        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;Filtered channel &quot;</span> <span class="p">+</span> <span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">filtered</span><span class="p">));</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="k">case</span> <span class="m">2</span><span class="p">:</span>
                        <span class="n">filtered</span> <span class="p">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="n">perform_bandpass</span> <span class="p">(</span><span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span> <span class="p">(</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="n">BoardShim</span><span class="p">.</span><span class="n">get_sampling_rate</span> <span class="p">(</span><span class="n">board_id</span><span class="p">),</span> <span class="m">15.0</span><span class="p">,</span> <span class="m">5.0</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">FilterTypes</span><span class="p">.</span><span class="n">BUTTERWORTH</span><span class="p">,</span> <span class="m">0.0</span><span class="p">);</span>
                        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;Filtered channel &quot;</span> <span class="p">+</span> <span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">filtered</span><span class="p">));</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="k">case</span> <span class="m">3</span><span class="p">:</span>
                        <span class="n">filtered</span> <span class="p">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="n">perform_bandstop</span> <span class="p">(</span><span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span> <span class="p">(</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="n">BoardShim</span><span class="p">.</span><span class="n">get_sampling_rate</span> <span class="p">(</span><span class="n">board_id</span><span class="p">),</span> <span class="m">50.0</span><span class="p">,</span> <span class="m">1.0</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">FilterTypes</span><span class="p">.</span><span class="n">CHEBYSHEV_TYPE_1</span><span class="p">,</span> <span class="m">1.0</span><span class="p">);</span>
                        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;Filtered channel &quot;</span> <span class="p">+</span> <span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">filtered</span><span class="p">));</span>
                        <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="c-denoising">
<h3>C# Denoising<a class="headerlink" href="#c-denoising" title="Permalink to this headline">¶</a></h3>
<div class="highlight-c# notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">brainflow</span><span class="p">;</span>

<span class="k">using</span> <span class="nn">Accord.Math</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">test</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">GetBoardData</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span> <span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// use synthetic board for demo</span>
            <span class="n">BoardShim</span><span class="p">.</span><span class="n">enable_dev_board_logger</span> <span class="p">();</span>
            <span class="n">BrainFlowInputParams</span> <span class="n">input_params</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BrainFlowInputParams</span> <span class="p">();</span>
            <span class="kt">int</span> <span class="n">board_id</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">BoardIds</span><span class="p">.</span><span class="n">SYNTHETIC_BOARD</span><span class="p">;</span>

            <span class="n">BoardShim</span> <span class="n">board_shim</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">input_params</span><span class="p">);</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">prepare_session</span> <span class="p">();</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">start_stream</span> <span class="p">(</span><span class="m">3600</span><span class="p">);</span>
            <span class="n">BoardShim</span><span class="p">.</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="p">.</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
            <span class="n">System</span><span class="p">.</span><span class="n">Threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">.</span><span class="n">Sleep</span> <span class="p">(</span><span class="m">5000</span><span class="p">);</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">stop_stream</span> <span class="p">();</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;data count: {0}&quot;</span><span class="p">,</span> <span class="n">board_shim</span><span class="p">.</span><span class="n">get_board_data_count</span> <span class="p">());</span>
            <span class="kt">double</span><span class="p">[,]</span> <span class="n">unprocessed_data</span> <span class="p">=</span> <span class="n">board_shim</span><span class="p">.</span><span class="n">get_current_board_data</span> <span class="p">(</span><span class="m">64</span><span class="p">);</span>
            <span class="kt">int</span><span class="p">[]</span> <span class="n">eeg_channels</span> <span class="p">=</span> <span class="n">BoardShim</span><span class="p">.</span><span class="n">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">index</span> <span class="k">in</span> <span class="n">eeg_channels</span><span class="p">)</span>
                <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span> <span class="p">(</span><span class="n">index</span><span class="p">)));</span>
            <span class="n">board_shim</span><span class="p">.</span><span class="n">release_session</span> <span class="p">();</span>

            <span class="c1">// for demo apply different methods to different channels</span>
            <span class="kt">double</span><span class="p">[]</span> <span class="n">filtered</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">eeg_channels</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="k">switch</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="c1">// first of all you can try simple moving average or moving median</span>
                    <span class="k">case</span> <span class="m">0</span><span class="p">:</span>
                        <span class="n">filtered</span> <span class="p">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="n">perform_rolling_filter</span> <span class="p">(</span><span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span> <span class="p">(</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="m">3</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">AggOperations</span><span class="p">.</span><span class="n">MEAN</span><span class="p">);</span>
                        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;Filtered channel &quot;</span> <span class="p">+</span> <span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">filtered</span><span class="p">));</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="k">case</span> <span class="m">1</span><span class="p">:</span>
                        <span class="n">filtered</span> <span class="p">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="n">perform_rolling_filter</span> <span class="p">(</span><span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span> <span class="p">(</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="m">3</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">AggOperations</span><span class="p">.</span><span class="n">MEDIAN</span><span class="p">);</span>
                        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;Filtered channel &quot;</span> <span class="p">+</span> <span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">filtered</span><span class="p">));</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="c1">// if for your signal these methods dont work good you can try wavelet based denoising</span>
                    <span class="k">default</span><span class="p">:</span>
                        <span class="c1">// feel free to try different functions and different decomposition levels</span>
                        <span class="n">filtered</span> <span class="p">=</span> <span class="n">DataFilter</span><span class="p">.</span><span class="n">perform_wavelet_denoising</span> <span class="p">(</span><span class="n">unprocessed_data</span><span class="p">.</span><span class="n">GetRow</span> <span class="p">(</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="s">&quot;db4&quot;</span><span class="p">,</span> <span class="m">3</span><span class="p">);</span>
                        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;Filtered channel &quot;</span> <span class="p">+</span> <span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="s">&quot;[{0}]&quot;</span><span class="p">,</span> <span class="kt">string</span><span class="p">.</span><span class="n">Join</span> <span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">filtered</span><span class="p">));</span>
                        <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id1">
<h2>C++<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="compound">
<p class="compound-first">To compile examples below for Linux or MacOS run:</p>
<div class="compound-last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">tests</span><span class="o">/</span><span class="n">cpp</span><span class="o">/</span><span class="n">get_data_demo</span>
<span class="n">mkdir</span> <span class="n">build</span>
<span class="n">cd</span> <span class="n">build</span>
<span class="n">cmake</span> <span class="o">-</span><span class="n">DCMAKE_PREFIX_PATH</span><span class="o">=</span><span class="n">TYPE_FULL_PATH_TO_BRAINFLOW_INSTALLED_FOLDER</span> <span class="o">..</span>
<span class="c1"># e.g. cmake -DCMAKE_PREFIX_PATH=/home/andrey/brainflow/installed_linux ..</span>
<span class="n">make</span>
</pre></div>
</div>
</div>
<p>For Windows it’s almost the same.</p>
<p><strong>Make sure that compiled dynamic libraries exist in search path before running an executable by doing one of the following:</strong></p>
<ul class="simple">
<li><p>for Linux and MacOS add them to LD_LIBRARY_PATH env variable</p></li>
<li><p>for Windows add them to PATH env variable</p></li>
<li><p>or just copypaste them to the folder where your executable is located, don’t forget to copypaste brainflow_boards.json too</p></li>
</ul>
<div class="section" id="cmake-file-example">
<h3>CMake File Example<a class="headerlink" href="#cmake-file-example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cmake_minimum_required (VERSION 3.10)
project (BRAINFLOW_SIGNAL_PROCESSING)

set (CMAKE_CXX_STANDARD 11)
set (CMAKE_VERBOSE_MAKEFILE ON)

macro (configure_msvc_runtime)
    if (MSVC)
        # Default to statically-linked runtime.
        if (&quot;${MSVC_RUNTIME}&quot; STREQUAL &quot;&quot;)
            set (MSVC_RUNTIME &quot;static&quot;)
        endif ()
        # Set compiler options.
        set (variables
            CMAKE_C_FLAGS_DEBUG
            CMAKE_C_FLAGS_MINSIZEREL
            CMAKE_C_FLAGS_RELEASE
            CMAKE_C_FLAGS_RELWITHDEBINFO
            CMAKE_CXX_FLAGS_DEBUG
            CMAKE_CXX_FLAGS_MINSIZEREL
            CMAKE_CXX_FLAGS_RELEASE
            CMAKE_CXX_FLAGS_RELWITHDEBINFO
        )
        if (${MSVC_RUNTIME} STREQUAL &quot;static&quot;)
            message(STATUS
                &quot;MSVC -&gt; forcing use of statically-linked runtime.&quot;
            )
            foreach (variable ${variables})
                if (${variable} MATCHES &quot;/MD&quot;)
                    string (REGEX REPLACE &quot;/MD&quot; &quot;/MT&quot; ${variable} &quot;${${variable}}&quot;)
                endif ()
            endforeach ()
        else ()
            message (STATUS
                &quot;MSVC -&gt; forcing use of dynamically-linked runtime.&quot;
            )
            foreach (variable ${variables})
                if (${variable} MATCHES &quot;/MT&quot;)
                    string (REGEX REPLACE &quot;/MT&quot; &quot;/MD&quot; ${variable} &quot;${${variable}}&quot;)
                endif ()
            endforeach ()
        endif ()
    endif ()
endmacro ()

# link msvc runtime statically
configure_msvc_runtime()

find_package (
    brainflow CONFIG REQUIRED
)

##############################
## Demo for read write file ##
##############################
add_executable (
    serialization
    src/serialization.cpp
)

target_include_directories (
    serialization PUBLIC
    ${brainflow_INCLUDE_DIRS}
)

target_link_libraries (
    serialization PUBLIC
    # for some systems(ubuntu for example) order matters
    ${BrainflowPath}
    ${DataHandlerPath}
    ${BoardControllerPath}
)

###########################
## Demo for downsampling ##
###########################
add_executable (
    downsampling
    src/downsampling.cpp
)

target_include_directories (
    downsampling PUBLIC
    ${brainflow_INCLUDE_DIRS}
)

target_link_libraries (
    downsampling PUBLIC
    # for some systems(ubuntu for example) order matters
    ${BrainflowPath}
    ${DataHandlerPath}
    ${BoardControllerPath}
)

###############################
## Demo for signal filtering ##
###############################
add_executable (
    signal_filtering
    src/signal_filtering.cpp
)

target_include_directories (
    signal_filtering PUBLIC
    ${brainflow_INCLUDE_DIRS}
)

target_link_libraries (
    signal_filtering PUBLIC
    # for some systems(ubuntu for example) order matters
    ${BrainflowPath}
    ${DataHandlerPath}
    ${BoardControllerPath}
)

########################
## Demo for denoising ##
########################
add_executable (
    denoising
    src/denoising.cpp
)

target_include_directories (
    denoising PUBLIC
    ${brainflow_INCLUDE_DIRS}
)

target_link_libraries (
    denoising PUBLIC
    # for some systems(ubuntu for example) order matters
    ${BrainflowPath}
    ${DataHandlerPath}
    ${BoardControllerPath}
)

#########################
## Demo for transforms ##
#########################
add_executable (
    transforms
    src/transforms.cpp
)

target_include_directories (
    transforms PUBLIC
    ${brainflow_INCLUDE_DIRS}
)

target_link_libraries (
    transforms PUBLIC
    # for some systems(ubuntu for example) order matters
    ${BrainflowPath}
    ${DataHandlerPath}
    ${BoardControllerPath}
)
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>C++ Read Data from a Board<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>

<span class="cp">#ifdef _WIN32</span>
<span class="cp">#include</span> <span class="cpf">&lt;windows.h&gt;</span><span class="cp"></span>
<span class="cp">#else</span>
<span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>
<span class="cp">#endif</span>

<span class="cp">#include</span> <span class="cpf">&quot;board_shim.h&quot;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">print_head</span> <span class="p">(</span><span class="kt">double</span> <span class="o">**</span><span class="n">data_buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_channels</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_data_points</span><span class="p">);</span>
<span class="kt">bool</span> <span class="nf">parse_args</span> <span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[],</span> <span class="k">struct</span> <span class="n">BrainFlowInputParams</span> <span class="o">*</span><span class="n">params</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">board_id</span><span class="p">);</span>


<span class="kt">int</span> <span class="nf">main</span> <span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="k">struct</span> <span class="n">BrainFlowInputParams</span> <span class="n">params</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">board_id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">parse_args</span> <span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">params</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">board_id</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">BoardShim</span><span class="o">::</span><span class="n">enable_dev_board_logger</span> <span class="p">();</span>

    <span class="n">BoardShim</span> <span class="o">*</span><span class="n">board</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">params</span><span class="p">);</span>
    <span class="kt">double</span> <span class="o">**</span><span class="n">data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">num_rows</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">try</span>
    <span class="p">{</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">prepare_session</span> <span class="p">();</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">start_stream</span> <span class="p">();</span>
        <span class="c1">// board-&gt;start_stream (45000, (char *)&quot;file://file_stream_test.csv:a&quot;); // store data in a</span>
        <span class="c1">// file directly during streaming</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
<span class="cp">#ifdef _WIN32</span>
        <span class="n">Sleep</span> <span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
<span class="cp">#else</span>
        <span class="n">sleep</span> <span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="cp">#endif</span>

        <span class="n">board</span><span class="o">-&gt;</span><span class="n">stop_stream</span> <span class="p">();</span>
        <span class="kt">int</span> <span class="n">data_count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">get_board_data</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">data_count</span><span class="p">);</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;read %d packages&quot;</span><span class="p">,</span> <span class="n">data_count</span><span class="p">);</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">release_session</span> <span class="p">();</span>
        <span class="c1">// for STREAMING_BOARD you have to query information using board id for master board</span>
        <span class="c1">// because for STREAMING_BOARD data format is determined by master board!</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">board_id</span> <span class="o">==</span> <span class="n">STREAMING_BOARD</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">board_id</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">stoi</span> <span class="p">(</span><span class="n">params</span><span class="p">.</span><span class="n">other_info</span><span class="p">);</span>
            <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;Use Board Id %d&quot;</span><span class="p">,</span> <span class="n">board_id</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">num_rows</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">::</span><span class="n">get_num_rows</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Data from the board&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="n">print_head</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">num_rows</span><span class="p">,</span> <span class="n">data_count</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="k">const</span> <span class="n">BrainFlowException</span> <span class="o">&amp;</span><span class="n">err</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_ERROR</span><span class="p">,</span> <span class="n">err</span><span class="p">.</span><span class="n">what</span> <span class="p">());</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">err</span><span class="p">.</span><span class="n">exit_code</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">data</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">delete</span><span class="p">[]</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">delete</span><span class="p">[]</span> <span class="n">data</span><span class="p">;</span>
    <span class="k">delete</span> <span class="n">board</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">print_head</span> <span class="p">(</span><span class="kt">double</span> <span class="o">**</span><span class="n">data_buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_channels</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_data_points</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Total Channels for this board: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">num_channels</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">num_points</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_data_points</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">?</span> <span class="nl">num_data_points</span> <span class="p">:</span> <span class="mi">5</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_channels</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Channel &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;: &quot;</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">num_points</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">data_buf</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;,&quot;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="nf">parse_args</span> <span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[],</span> <span class="k">struct</span> <span class="n">BrainFlowInputParams</span> <span class="o">*</span><span class="n">params</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">board_id</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">bool</span> <span class="n">board_id_found</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="s">&quot;--board-id&quot;</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">i</span><span class="o">++</span><span class="p">;</span>
                <span class="n">board_id_found</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                <span class="o">*</span><span class="n">board_id</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">stoi</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;missed argument&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="s">&quot;--ip-address&quot;</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">i</span><span class="o">++</span><span class="p">;</span>
                <span class="n">params</span><span class="o">-&gt;</span><span class="n">ip_address</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;missed argument&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="s">&quot;--ip-port&quot;</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">i</span><span class="o">++</span><span class="p">;</span>
                <span class="n">params</span><span class="o">-&gt;</span><span class="n">ip_port</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">stoi</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;missed argument&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="s">&quot;--serial-port&quot;</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">i</span><span class="o">++</span><span class="p">;</span>
                <span class="n">params</span><span class="o">-&gt;</span><span class="n">serial_port</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;missed argument&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="s">&quot;--ip-protocol&quot;</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">i</span><span class="o">++</span><span class="p">;</span>
                <span class="n">params</span><span class="o">-&gt;</span><span class="n">ip_protocol</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">stoi</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;missed argument&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="s">&quot;--other-info&quot;</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">i</span><span class="o">++</span><span class="p">;</span>
                <span class="n">params</span><span class="o">-&gt;</span><span class="n">other_info</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;missed argument&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="s">&quot;--mac-address&quot;</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">i</span><span class="o">++</span><span class="p">;</span>
                <span class="n">params</span><span class="o">-&gt;</span><span class="n">mac_address</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;missed argument&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
                <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">board_id_found</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;board id is not provided&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3>C++ Read Write File<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>

<span class="cp">#ifdef _WIN32</span>
<span class="cp">#include</span> <span class="cpf">&lt;windows.h&gt;</span><span class="cp"></span>
<span class="cp">#else</span>
<span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>
<span class="cp">#endif</span>

<span class="cp">#include</span> <span class="cpf">&quot;board_shim.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;data_filter.h&quot;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">print_head</span> <span class="p">(</span><span class="kt">double</span> <span class="o">**</span><span class="n">data_buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_channels</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_data_points</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="k">struct</span> <span class="n">BrainFlowInputParams</span> <span class="n">params</span><span class="p">;</span>
    <span class="c1">// use synthetic board for demo</span>
    <span class="kt">int</span> <span class="n">board_id</span> <span class="o">=</span> <span class="n">SYNTHETIC_BOARD</span><span class="p">;</span>

    <span class="n">BoardShim</span><span class="o">::</span><span class="n">enable_dev_board_logger</span> <span class="p">();</span>

    <span class="n">BoardShim</span> <span class="o">*</span><span class="n">board</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">params</span><span class="p">);</span>
    <span class="kt">double</span> <span class="o">**</span><span class="n">data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">num_rows</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">try</span>
    <span class="p">{</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">prepare_session</span> <span class="p">();</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">start_stream</span> <span class="p">();</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
<span class="cp">#ifdef _WIN32</span>
        <span class="n">Sleep</span> <span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
<span class="cp">#else</span>
        <span class="n">sleep</span> <span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="cp">#endif</span>

        <span class="n">board</span><span class="o">-&gt;</span><span class="n">stop_stream</span> <span class="p">();</span>
        <span class="kt">int</span> <span class="n">data_count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">get_board_data</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">data_count</span><span class="p">);</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;read %d packages&quot;</span><span class="p">,</span> <span class="n">data_count</span><span class="p">);</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">release_session</span> <span class="p">();</span>
        <span class="n">num_rows</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">::</span><span class="n">get_num_rows</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Data from the board&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="n">print_head</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">num_rows</span><span class="p">,</span> <span class="n">data_count</span><span class="p">);</span>

        <span class="c1">// demo for serialization</span>
        <span class="n">DataFilter</span><span class="o">::</span><span class="n">write_file</span> <span class="p">(</span>
            <span class="n">data</span><span class="p">,</span> <span class="n">num_rows</span><span class="p">,</span> <span class="n">data_count</span><span class="p">,</span> <span class="s">&quot;test.csv&quot;</span><span class="p">,</span> <span class="s">&quot;w&quot;</span><span class="p">);</span> <span class="c1">// use &quot;a&quot; for append mode</span>
        <span class="kt">int</span> <span class="n">restored_num_rows</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">restored_num_cols</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">double</span> <span class="o">**</span><span class="n">restored_data</span> <span class="o">=</span>
            <span class="n">DataFilter</span><span class="o">::</span><span class="n">read_file</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">restored_num_rows</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">restored_num_cols</span><span class="p">,</span> <span class="s">&quot;test.csv&quot;</span><span class="p">);</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
                  <span class="o">&lt;&lt;</span> <span class="s">&quot;Data from the file, num packages is &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">restored_num_cols</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span>
                  <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="n">print_head</span> <span class="p">(</span><span class="n">restored_data</span><span class="p">,</span> <span class="n">restored_num_rows</span><span class="p">,</span> <span class="n">restored_num_cols</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">restored_num_rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">delete</span><span class="p">[]</span> <span class="n">restored_data</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">delete</span><span class="p">[]</span> <span class="n">restored_data</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="k">const</span> <span class="n">BrainFlowException</span> <span class="o">&amp;</span><span class="n">err</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_ERROR</span><span class="p">,</span> <span class="n">err</span><span class="p">.</span><span class="n">what</span> <span class="p">());</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">err</span><span class="p">.</span><span class="n">exit_code</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">data</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">delete</span><span class="p">[]</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">delete</span><span class="p">[]</span> <span class="n">data</span><span class="p">;</span>
    <span class="k">delete</span> <span class="n">board</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">print_head</span> <span class="p">(</span><span class="kt">double</span> <span class="o">**</span><span class="n">data_buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_channels</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_data_points</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Total Channels for this board: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">num_channels</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">num_points</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_data_points</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">?</span> <span class="nl">num_data_points</span> <span class="p">:</span> <span class="mi">5</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_channels</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Channel &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;: &quot;</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">num_points</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">data_buf</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;,&quot;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h3>C++ Downsample Data<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>

<span class="cp">#ifdef _WIN32</span>
<span class="cp">#include</span> <span class="cpf">&lt;windows.h&gt;</span><span class="cp"></span>
<span class="cp">#else</span>
<span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>
<span class="cp">#endif</span>

<span class="cp">#include</span> <span class="cpf">&quot;board_shim.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;data_filter.h&quot;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">print_one_row</span> <span class="p">(</span><span class="kt">double</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_data_points</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="k">struct</span> <span class="n">BrainFlowInputParams</span> <span class="n">params</span><span class="p">;</span>
    <span class="c1">// use synthetic board for demo</span>
    <span class="kt">int</span> <span class="n">board_id</span> <span class="o">=</span> <span class="n">SYNTHETIC_BOARD</span><span class="p">;</span>

    <span class="n">BoardShim</span><span class="o">::</span><span class="n">enable_dev_board_logger</span> <span class="p">();</span>

    <span class="n">BoardShim</span> <span class="o">*</span><span class="n">board</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">params</span><span class="p">);</span>
    <span class="kt">double</span> <span class="o">**</span><span class="n">data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="kt">int</span> <span class="o">*</span><span class="n">eeg_channels</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">num_rows</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">try</span>
    <span class="p">{</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">prepare_session</span> <span class="p">();</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">start_stream</span> <span class="p">();</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
<span class="cp">#ifdef _WIN32</span>
        <span class="n">Sleep</span> <span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
<span class="cp">#else</span>
        <span class="n">sleep</span> <span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="cp">#endif</span>

        <span class="n">board</span><span class="o">-&gt;</span><span class="n">stop_stream</span> <span class="p">();</span>
        <span class="kt">int</span> <span class="n">data_count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">get_board_data</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">data_count</span><span class="p">);</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;read %d packages&quot;</span><span class="p">,</span> <span class="n">data_count</span><span class="p">);</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">release_session</span> <span class="p">();</span>
        <span class="n">num_rows</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">::</span><span class="n">get_num_rows</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>

        <span class="c1">// downsample only eeg channels and print them</span>
        <span class="kt">int</span> <span class="n">eeg_num_channels</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">eeg_channels</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">::</span><span class="n">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">eeg_num_channels</span><span class="p">);</span>
        <span class="kt">double</span> <span class="o">*</span><span class="n">downsampled_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">filtered_size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">eeg_num_channels</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Data from :&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; before downsampling &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
            <span class="n">print_one_row</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">);</span>

            <span class="c1">// just for demo apply different downsampling algorithms to different channels</span>
            <span class="c1">// downsampling here doesnt apply lowpass filter for you, it just aggregates data points</span>
            <span class="k">switch</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
                    <span class="n">downsampled_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_downsampling</span> <span class="p">(</span>
                        <span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">MEAN</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">filtered_size</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
                    <span class="n">downsampled_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_downsampling</span> <span class="p">(</span>
                        <span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">MEDIAN</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">filtered_size</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">default</span><span class="o">:</span>
                    <span class="n">downsampled_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_downsampling</span> <span class="p">(</span>
                        <span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">EACH</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">filtered_size</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Data from :&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; after downsampling &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
            <span class="n">print_one_row</span> <span class="p">(</span><span class="n">downsampled_data</span><span class="p">,</span> <span class="n">filtered_size</span><span class="p">);</span>
            <span class="k">delete</span><span class="p">[]</span> <span class="n">downsampled_data</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="k">const</span> <span class="n">BrainFlowException</span> <span class="o">&amp;</span><span class="n">err</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_ERROR</span><span class="p">,</span> <span class="n">err</span><span class="p">.</span><span class="n">what</span> <span class="p">());</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">err</span><span class="p">.</span><span class="n">exit_code</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">data</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">delete</span><span class="p">[]</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">delete</span><span class="p">[]</span> <span class="n">data</span><span class="p">;</span>
    <span class="k">delete</span><span class="p">[]</span> <span class="n">eeg_channels</span><span class="p">;</span>
    <span class="k">delete</span> <span class="n">board</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">print_one_row</span> <span class="p">(</span><span class="kt">double</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_data_points</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// print only first 10 data points</span>
    <span class="kt">int</span> <span class="n">num_points</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_data_points</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="o">?</span> <span class="nl">num_data_points</span> <span class="p">:</span> <span class="mi">10</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_points</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h3>C++ Transforms<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>

<span class="cp">#ifdef _WIN32</span>
<span class="cp">#include</span> <span class="cpf">&lt;windows.h&gt;</span><span class="cp"></span>
<span class="cp">#else</span>
<span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>
<span class="cp">#endif</span>

<span class="cp">#include</span> <span class="cpf">&quot;board_shim.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;data_filter.h&quot;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">print_one_row</span> <span class="p">(</span><span class="kt">double</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_data_points</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="k">struct</span> <span class="n">BrainFlowInputParams</span> <span class="n">params</span><span class="p">;</span>
    <span class="c1">// use synthetic board for demo</span>
    <span class="kt">int</span> <span class="n">board_id</span> <span class="o">=</span> <span class="n">SYNTHETIC_BOARD</span><span class="p">;</span>

    <span class="n">BoardShim</span><span class="o">::</span><span class="n">enable_dev_board_logger</span> <span class="p">();</span>

    <span class="n">BoardShim</span> <span class="o">*</span><span class="n">board</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">params</span><span class="p">);</span>
    <span class="kt">double</span> <span class="o">**</span><span class="n">data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="kt">int</span> <span class="o">*</span><span class="n">eeg_channels</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">num_rows</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">try</span>
    <span class="p">{</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">prepare_session</span> <span class="p">();</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">start_stream</span> <span class="p">();</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
<span class="cp">#ifdef _WIN32</span>
        <span class="n">Sleep</span> <span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
<span class="cp">#else</span>
        <span class="n">sleep</span> <span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="cp">#endif</span>

        <span class="n">board</span><span class="o">-&gt;</span><span class="n">stop_stream</span> <span class="p">();</span>
        <span class="kt">int</span> <span class="n">data_count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">get_current_board_data</span> <span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">data_count</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">data_count</span> <span class="o">!=</span> <span class="mi">128</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_ERROR</span><span class="p">,</span>
                <span class="s">&quot;read %d packages, for this test we want exactly 128 packages&quot;</span><span class="p">,</span> <span class="n">data_count</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">GENERAL_ERROR</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">release_session</span> <span class="p">();</span>
        <span class="n">num_rows</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">::</span><span class="n">get_num_rows</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>

        <span class="kt">int</span> <span class="n">eeg_num_channels</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">eeg_channels</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">::</span><span class="n">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">eeg_num_channels</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">filtered_size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">double</span> <span class="o">*</span><span class="n">downsampled_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">eeg_num_channels</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// demo for wavelet transform</span>
            <span class="c1">// std::pair of coeffs array in format[A(J) D(J) D(J-1) ..... D(1)] where J is a</span>
            <span class="c1">// decomposition level, A - app coeffs, D - detailed coeffs, and array which stores</span>
            <span class="c1">// length for each block, len of this array is decomposition_length + 1</span>
            <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">double</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*&gt;</span> <span class="n">wavelet_output</span> <span class="o">=</span>
                <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_wavelet_transform</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">,</span> <span class="s">&quot;db4&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>

            <span class="c1">// you can do smth with wavelet coeffs here, for example denoising works via thresholds</span>
            <span class="c1">// for wavelet coefficients</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;approximation coefficients:&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">wavelet_output</span><span class="p">.</span><span class="n">second</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">wavelet_output</span><span class="p">.</span><span class="n">first</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;first block of detailed coefficients:&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">wavelet_output</span><span class="p">.</span><span class="n">second</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                 <span class="n">i</span> <span class="o">&lt;</span> <span class="n">wavelet_output</span><span class="p">.</span><span class="n">second</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">wavelet_output</span><span class="p">.</span><span class="n">second</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">wavelet_output</span><span class="p">.</span><span class="n">first</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

            <span class="kt">double</span> <span class="o">*</span><span class="n">restored_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_inverse_wavelet_transform</span> <span class="p">(</span>
                <span class="n">wavelet_output</span><span class="p">,</span> <span class="n">data_count</span><span class="p">,</span> <span class="s">&quot;db4&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>

            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Original data:&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
            <span class="n">print_one_row</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">);</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Restored after inverse wavelet transform data:&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
            <span class="n">print_one_row</span> <span class="p">(</span><span class="n">restored_data</span><span class="p">,</span> <span class="n">data_count</span><span class="p">);</span>

            <span class="k">delete</span><span class="p">[]</span> <span class="n">wavelet_output</span><span class="p">.</span><span class="n">first</span><span class="p">;</span>
            <span class="k">delete</span><span class="p">[]</span> <span class="n">restored_data</span><span class="p">;</span>
            <span class="k">delete</span><span class="p">[]</span> <span class="n">wavelet_output</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>

            <span class="c1">// demo for fft</span>
            <span class="c1">// data count must be power of 2 for fft!</span>
            <span class="n">std</span><span class="o">::</span><span class="n">complex</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">fft_data</span> <span class="o">=</span>
                <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_fft</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">);</span>
            <span class="c1">// len of fft_data array is N / 2 + 1</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;FFT coeffs:&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">data_count</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">fft_data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
            <span class="kt">double</span> <span class="o">*</span><span class="n">restored_from_fft_data</span> <span class="o">=</span> <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_ifft</span> <span class="p">(</span><span class="n">fft_data</span><span class="p">,</span> <span class="n">data_count</span><span class="p">);</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Restored after inverse fft transform data:&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
            <span class="n">print_one_row</span> <span class="p">(</span><span class="n">restored_from_fft_data</span><span class="p">,</span> <span class="n">data_count</span><span class="p">);</span>

            <span class="k">delete</span><span class="p">[]</span> <span class="n">fft_data</span><span class="p">;</span>
            <span class="k">delete</span><span class="p">[]</span> <span class="n">restored_from_fft_data</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="k">const</span> <span class="n">BrainFlowException</span> <span class="o">&amp;</span><span class="n">err</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_ERROR</span><span class="p">,</span> <span class="n">err</span><span class="p">.</span><span class="n">what</span> <span class="p">());</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">err</span><span class="p">.</span><span class="n">exit_code</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">data</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">delete</span><span class="p">[]</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">delete</span><span class="p">[]</span> <span class="n">data</span><span class="p">;</span>
    <span class="k">delete</span><span class="p">[]</span> <span class="n">eeg_channels</span><span class="p">;</span>
    <span class="k">delete</span> <span class="n">board</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">print_one_row</span> <span class="p">(</span><span class="kt">double</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_data_points</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_data_points</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h3>C++ Signal Filtering<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>

<span class="cp">#ifdef _WIN32</span>
<span class="cp">#include</span> <span class="cpf">&lt;windows.h&gt;</span><span class="cp"></span>
<span class="cp">#else</span>
<span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>
<span class="cp">#endif</span>

<span class="cp">#include</span> <span class="cpf">&quot;board_shim.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;data_filter.h&quot;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">print_head</span> <span class="p">(</span><span class="kt">double</span> <span class="o">**</span><span class="n">data_buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_channels</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_data_points</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="k">struct</span> <span class="n">BrainFlowInputParams</span> <span class="n">params</span><span class="p">;</span>
    <span class="c1">// use synthetic board for demo</span>
    <span class="kt">int</span> <span class="n">board_id</span> <span class="o">=</span> <span class="n">SYNTHETIC_BOARD</span><span class="p">;</span>

    <span class="n">BoardShim</span><span class="o">::</span><span class="n">enable_dev_board_logger</span> <span class="p">();</span>

    <span class="n">BoardShim</span> <span class="o">*</span><span class="n">board</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">params</span><span class="p">);</span>
    <span class="kt">double</span> <span class="o">**</span><span class="n">data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="kt">int</span> <span class="o">*</span><span class="n">eeg_channels</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">num_rows</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">try</span>
    <span class="p">{</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">prepare_session</span> <span class="p">();</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">start_stream</span> <span class="p">();</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
<span class="cp">#ifdef _WIN32</span>
        <span class="n">Sleep</span> <span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
<span class="cp">#else</span>
        <span class="n">sleep</span> <span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="cp">#endif</span>

        <span class="n">board</span><span class="o">-&gt;</span><span class="n">stop_stream</span> <span class="p">();</span>
        <span class="kt">int</span> <span class="n">data_count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">get_board_data</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">data_count</span><span class="p">);</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;read %d packages&quot;</span><span class="p">,</span> <span class="n">data_count</span><span class="p">);</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">release_session</span> <span class="p">();</span>
        <span class="n">num_rows</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">::</span><span class="n">get_num_rows</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Data from the board&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="n">print_head</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">num_rows</span><span class="p">,</span> <span class="n">data_count</span><span class="p">);</span>

        <span class="kt">int</span> <span class="n">eeg_num_channels</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">eeg_channels</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">::</span><span class="n">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">eeg_num_channels</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">filtered_size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">double</span> <span class="o">*</span><span class="n">downsampled_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">eeg_num_channels</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">switch</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="c1">// just for test and demo - apply different filters to different eeg channels</span>
                <span class="c1">// signal filtering methods work in-place</span>
                <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
                    <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_lowpass</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">,</span>
                        <span class="n">BoardShim</span><span class="o">::</span><span class="n">get_sampling_rate</span> <span class="p">(</span><span class="n">board_id</span><span class="p">),</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">BUTTERWORTH</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
                    <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_highpass</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">,</span>
                        <span class="n">BoardShim</span><span class="o">::</span><span class="n">get_sampling_rate</span> <span class="p">(</span><span class="n">board_id</span><span class="p">),</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">CHEBYSHEV_TYPE_1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
                    <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_bandpass</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">,</span>
                        <span class="n">BoardShim</span><span class="o">::</span><span class="n">get_sampling_rate</span> <span class="p">(</span><span class="n">board_id</span><span class="p">),</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">BESSEL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">default</span><span class="o">:</span>
                    <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_bandstop</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">,</span>
                        <span class="n">BoardShim</span><span class="o">::</span><span class="n">get_sampling_rate</span> <span class="p">(</span><span class="n">board_id</span><span class="p">),</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">BUTTERWORTH</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Data after processing&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="n">print_head</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">num_rows</span><span class="p">,</span> <span class="n">data_count</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="k">const</span> <span class="n">BrainFlowException</span> <span class="o">&amp;</span><span class="n">err</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_ERROR</span><span class="p">,</span> <span class="n">err</span><span class="p">.</span><span class="n">what</span> <span class="p">());</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">err</span><span class="p">.</span><span class="n">exit_code</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">data</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">delete</span><span class="p">[]</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">delete</span><span class="p">[]</span> <span class="n">data</span><span class="p">;</span>
    <span class="k">delete</span><span class="p">[]</span> <span class="n">eeg_channels</span><span class="p">;</span>
    <span class="k">delete</span> <span class="n">board</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">print_head</span> <span class="p">(</span><span class="kt">double</span> <span class="o">**</span><span class="n">data_buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_channels</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_data_points</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Total Channels for this board: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">num_channels</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">num_points</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_data_points</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">?</span> <span class="nl">num_data_points</span> <span class="p">:</span> <span class="mi">5</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_channels</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Channel &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;: &quot;</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">num_points</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">data_buf</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;,&quot;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h3>C++ Denoising<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>

<span class="cp">#ifdef _WIN32</span>
<span class="cp">#include</span> <span class="cpf">&lt;windows.h&gt;</span><span class="cp"></span>
<span class="cp">#else</span>
<span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>
<span class="cp">#endif</span>

<span class="cp">#include</span> <span class="cpf">&quot;board_shim.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;data_filter.h&quot;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">print_head</span> <span class="p">(</span><span class="kt">double</span> <span class="o">**</span><span class="n">data_buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_channels</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_data_points</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="k">struct</span> <span class="n">BrainFlowInputParams</span> <span class="n">params</span><span class="p">;</span>
    <span class="c1">// use synthetic board for demo</span>
    <span class="kt">int</span> <span class="n">board_id</span> <span class="o">=</span> <span class="n">SYNTHETIC_BOARD</span><span class="p">;</span>

    <span class="n">BoardShim</span><span class="o">::</span><span class="n">enable_dev_board_logger</span> <span class="p">();</span>

    <span class="n">BoardShim</span> <span class="o">*</span><span class="n">board</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BoardShim</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="n">params</span><span class="p">);</span>
    <span class="kt">double</span> <span class="o">**</span><span class="n">data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="kt">int</span> <span class="o">*</span><span class="n">eeg_channels</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">num_rows</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">try</span>
    <span class="p">{</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">prepare_session</span> <span class="p">();</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">start_stream</span> <span class="p">();</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;Start sleeping in the main thread&quot;</span><span class="p">);</span>
<span class="cp">#ifdef _WIN32</span>
        <span class="n">Sleep</span> <span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
<span class="cp">#else</span>
        <span class="n">sleep</span> <span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="cp">#endif</span>

        <span class="n">board</span><span class="o">-&gt;</span><span class="n">stop_stream</span> <span class="p">();</span>
        <span class="kt">int</span> <span class="n">data_count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">board</span><span class="o">-&gt;</span><span class="n">get_board_data</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">data_count</span><span class="p">);</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_INFO</span><span class="p">,</span> <span class="s">&quot;read %d packages&quot;</span><span class="p">,</span> <span class="n">data_count</span><span class="p">);</span>
        <span class="n">board</span><span class="o">-&gt;</span><span class="n">release_session</span> <span class="p">();</span>
        <span class="n">num_rows</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">::</span><span class="n">get_num_rows</span> <span class="p">(</span><span class="n">board_id</span><span class="p">);</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Data from the board&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="n">print_head</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">num_rows</span><span class="p">,</span> <span class="n">data_count</span><span class="p">);</span>

        <span class="kt">int</span> <span class="n">eeg_num_channels</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">eeg_channels</span> <span class="o">=</span> <span class="n">BoardShim</span><span class="o">::</span><span class="n">get_eeg_channels</span> <span class="p">(</span><span class="n">board_id</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">eeg_num_channels</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">eeg_num_channels</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">switch</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="c1">// for demo apply different methods to different channels, in production you should</span>
                <span class="c1">// choose one</span>
                <span class="c1">// first of all you can try simple moving average or moving median to remove noise</span>
                <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
                    <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_rolling_filter</span> <span class="p">(</span>
                        <span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">MEDIAN</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
                    <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_rolling_filter</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">MEAN</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
                    <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_rolling_filter</span> <span class="p">(</span>
                        <span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">MEDIAN</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
                    <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_rolling_filter</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">MEAN</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                    <span class="c1">// if moving average and moving median dont work well for your signal you can</span>
                    <span class="c1">// try wavelet based denoising, feel free to try different wavelet functions and</span>
                    <span class="c1">// decomposition levels</span>
                <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
                    <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_wavelet_denoising</span> <span class="p">(</span>
                        <span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">,</span> <span class="s">&quot;db4&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">5</span><span class="o">:</span>
                    <span class="n">DataFilter</span><span class="o">::</span><span class="n">perform_wavelet_denoising</span> <span class="p">(</span>
                        <span class="n">data</span><span class="p">[</span><span class="n">eeg_channels</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">data_count</span><span class="p">,</span> <span class="s">&quot;coif3&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Data after denoising&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="n">print_head</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">num_rows</span><span class="p">,</span> <span class="n">data_count</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="k">const</span> <span class="n">BrainFlowException</span> <span class="o">&amp;</span><span class="n">err</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">BoardShim</span><span class="o">::</span><span class="n">log_message</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">LogLevels</span><span class="o">::</span><span class="n">LEVEL_ERROR</span><span class="p">,</span> <span class="n">err</span><span class="p">.</span><span class="n">what</span> <span class="p">());</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">err</span><span class="p">.</span><span class="n">exit_code</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">data</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">delete</span><span class="p">[]</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">delete</span><span class="p">[]</span> <span class="n">data</span><span class="p">;</span>
    <span class="k">delete</span><span class="p">[]</span> <span class="n">eeg_channels</span><span class="p">;</span>
    <span class="k">delete</span> <span class="n">board</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">print_head</span> <span class="p">(</span><span class="kt">double</span> <span class="o">**</span><span class="n">data_buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_channels</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_data_points</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Total Channels for this board: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">num_channels</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">num_points</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_data_points</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">?</span> <span class="nl">num_data_points</span> <span class="p">:</span> <span class="mi">5</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_channels</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Channel &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;: &quot;</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">num_points</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">data_buf</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;,&quot;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="r">
<h2>R<a class="headerlink" href="#r" title="Permalink to this headline">¶</a></h2>
<div class="section" id="r-get-data-from-a-board">
<h3>R Get Data from a Board<a class="headerlink" href="#r-get-data-from-a-board" title="Permalink to this headline">¶</a></h3>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library </span><span class="p">(</span><span class="n">brainflow</span><span class="p">)</span>

<span class="n">params</span> <span class="o">&lt;-</span> <span class="n">brainflow_python</span><span class="o">$</span><span class="nf">BrainFlowInputParams </span><span class="p">()</span>
<span class="n">board_shim</span> <span class="o">&lt;-</span> <span class="n">brainflow_python</span><span class="o">$</span><span class="nf">BoardShim </span><span class="p">(</span><span class="n">brainflow_python</span><span class="o">$</span><span class="n">BoardIds</span><span class="o">$</span><span class="n">SYNTHETIC_BOARD</span><span class="o">$</span><span class="n">value</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">prepare_session </span><span class="p">()</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">start_stream </span><span class="p">()</span>
<span class="nf">Sys.sleep </span><span class="p">(</span><span class="n">time</span> <span class="o">=</span> <span class="m">5</span><span class="p">)</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">stop_stream </span><span class="p">()</span>
<span class="n">data</span> <span class="o">&lt;-</span> <span class="n">board_shim</span><span class="o">$</span><span class="nf">get_current_board_data </span><span class="p">(</span><span class="nf">as.integer </span><span class="p">(</span><span class="m">250</span><span class="p">))</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">release_session </span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="r-read-write-file">
<h3>R Read Write File<a class="headerlink" href="#r-read-write-file" title="Permalink to this headline">¶</a></h3>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library </span><span class="p">(</span><span class="n">brainflow</span><span class="p">)</span>

<span class="n">params</span> <span class="o">&lt;-</span> <span class="n">brainflow_python</span><span class="o">$</span><span class="nf">BrainFlowInputParams </span><span class="p">()</span>
<span class="n">board_shim</span> <span class="o">&lt;-</span> <span class="n">brainflow_python</span><span class="o">$</span><span class="nf">BoardShim </span><span class="p">(</span><span class="n">brainflow_python</span><span class="o">$</span><span class="n">BoardIds</span><span class="o">$</span><span class="n">SYNTHETIC_BOARD</span><span class="o">$</span><span class="n">value</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">prepare_session </span><span class="p">()</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">start_stream </span><span class="p">()</span>
<span class="nf">Sys.sleep </span><span class="p">(</span><span class="n">time</span> <span class="o">=</span> <span class="m">5</span><span class="p">)</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">stop_stream </span><span class="p">()</span>
<span class="n">data</span> <span class="o">&lt;-</span> <span class="n">board_shim</span><span class="o">$</span><span class="nf">get_current_board_data </span><span class="p">(</span><span class="nf">as.integer </span><span class="p">(</span><span class="m">250</span><span class="p">))</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">release_session </span><span class="p">()</span>

<span class="n">brainflow_python</span><span class="o">$</span><span class="n">DataFilter</span><span class="o">$</span><span class="nf">write_file </span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s">&quot;test.csv&quot;</span><span class="p">,</span> <span class="s">&quot;w&quot;</span><span class="p">)</span>
<span class="n">data_restored</span> <span class="o">&lt;-</span> <span class="n">brainflow_python</span><span class="o">$</span><span class="n">DataFilter</span><span class="o">$</span><span class="nf">read_file </span><span class="p">(</span><span class="s">&quot;test.csv&quot;</span><span class="p">)</span>
<span class="nf">print </span><span class="p">(</span><span class="n">restored_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="r-transforms">
<h3>R Transforms<a class="headerlink" href="#r-transforms" title="Permalink to this headline">¶</a></h3>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library </span><span class="p">(</span><span class="n">brainflow</span><span class="p">)</span>

<span class="n">params</span> <span class="o">&lt;-</span> <span class="n">brainflow_python</span><span class="o">$</span><span class="nf">BrainFlowInputParams </span><span class="p">()</span>
<span class="n">board_shim</span> <span class="o">&lt;-</span> <span class="n">brainflow_python</span><span class="o">$</span><span class="nf">BoardShim </span><span class="p">(</span><span class="n">brainflow_python</span><span class="o">$</span><span class="n">BoardIds</span><span class="o">$</span><span class="n">SYNTHETIC_BOARD</span><span class="o">$</span><span class="n">value</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">prepare_session </span><span class="p">()</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">start_stream </span><span class="p">()</span>
<span class="nf">Sys.sleep </span><span class="p">(</span><span class="n">time</span> <span class="o">=</span> <span class="m">5</span><span class="p">)</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">stop_stream </span><span class="p">()</span>
<span class="n">data</span> <span class="o">&lt;-</span> <span class="n">board_shim</span><span class="o">$</span><span class="nf">get_current_board_data </span><span class="p">(</span><span class="nf">as.integer </span><span class="p">(</span><span class="m">250</span><span class="p">))</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">release_session </span><span class="p">()</span>

<span class="c1"># need to convert to numpy array manually</span>
<span class="n">numpy_data</span> <span class="o">&lt;-</span> <span class="n">np</span><span class="o">$</span><span class="nf">array </span><span class="p">(</span><span class="n">data[2</span><span class="p">,</span><span class="n">]</span><span class="p">)</span>
<span class="nf">print </span><span class="p">(</span><span class="n">numpy_data</span><span class="p">)</span>
<span class="n">wavelet_data</span> <span class="o">&lt;-</span> <span class="n">brainflow_python</span><span class="o">$</span><span class="n">DataFilter</span><span class="o">$</span><span class="nf">perform_wavelet_transform </span><span class="p">(</span><span class="n">numpy_data</span><span class="p">,</span> <span class="s">&quot;db4&quot;</span><span class="p">,</span> <span class="nf">as.integer </span><span class="p">(</span><span class="m">3</span><span class="p">))</span>
<span class="n">restored_data</span> <span class="o">&lt;-</span> <span class="n">brainflow_python</span><span class="o">$</span><span class="n">DataFilter</span><span class="o">$</span><span class="nf">perform_inverse_wavelet_transform </span><span class="p">(</span><span class="n">wavelet_data</span><span class="p">,</span> <span class="nf">length </span><span class="p">(</span><span class="n">numpy_data</span><span class="p">),</span> <span class="s">&quot;db4&quot;</span><span class="p">,</span> <span class="nf">as.integer </span><span class="p">(</span><span class="m">3</span><span class="p">))</span>
<span class="nf">print </span><span class="p">(</span><span class="n">restored_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="r-signal-filtering">
<h3>R Signal Filtering<a class="headerlink" href="#r-signal-filtering" title="Permalink to this headline">¶</a></h3>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library </span><span class="p">(</span><span class="n">brainflow</span><span class="p">)</span>

<span class="n">params</span> <span class="o">&lt;-</span> <span class="n">brainflow_python</span><span class="o">$</span><span class="nf">BrainFlowInputParams </span><span class="p">()</span>
<span class="n">board_shim</span> <span class="o">&lt;-</span> <span class="n">brainflow_python</span><span class="o">$</span><span class="nf">BoardShim </span><span class="p">(</span><span class="n">brainflow_python</span><span class="o">$</span><span class="n">BoardIds</span><span class="o">$</span><span class="n">SYNTHETIC_BOARD</span><span class="o">$</span><span class="n">value</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">prepare_session </span><span class="p">()</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">start_stream </span><span class="p">()</span>
<span class="nf">Sys.sleep </span><span class="p">(</span><span class="n">time</span> <span class="o">=</span> <span class="m">5</span><span class="p">)</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">stop_stream </span><span class="p">()</span>
<span class="n">data</span> <span class="o">&lt;-</span> <span class="n">board_shim</span><span class="o">$</span><span class="nf">get_current_board_data </span><span class="p">(</span><span class="nf">as.integer </span><span class="p">(</span><span class="m">250</span><span class="p">))</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">release_session </span><span class="p">()</span>

<span class="c1"># need to convert to numpy array manually</span>
<span class="n">numpy_data</span> <span class="o">&lt;-</span> <span class="n">np</span><span class="o">$</span><span class="nf">array </span><span class="p">(</span><span class="n">data[2</span><span class="p">,</span><span class="n">]</span><span class="p">)</span>
<span class="nf">print </span><span class="p">(</span><span class="n">numpy_data</span><span class="p">)</span>
<span class="n">sampling_rate</span> <span class="o">&lt;-</span> <span class="n">board_shim</span><span class="o">$</span><span class="nf">get_sampling_rate </span><span class="p">(</span><span class="n">brainflow_python</span><span class="o">$</span><span class="n">BoardIds</span><span class="o">$</span><span class="n">SYNTHETIC_BOARD</span><span class="o">$</span><span class="n">value</span><span class="p">)</span>
<span class="n">brainflow_python</span><span class="o">$</span><span class="n">DataFilter</span><span class="o">$</span><span class="nf">perform_bandpass </span><span class="p">(</span><span class="n">numpy_data</span><span class="p">,</span> <span class="n">sampling_rate</span><span class="p">,</span> <span class="m">10.0</span><span class="p">,</span> <span class="m">5.0</span><span class="p">,</span> <span class="nf">as.integer </span><span class="p">(</span><span class="m">3</span><span class="p">),</span> <span class="n">brainflow_python</span><span class="o">$</span><span class="n">FilterTypes</span><span class="o">$</span><span class="n">BESSEL</span><span class="o">$</span><span class="n">value</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
<span class="nf">print </span><span class="p">(</span><span class="n">numpy_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="r-denoising">
<h3>R Denoising<a class="headerlink" href="#r-denoising" title="Permalink to this headline">¶</a></h3>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library </span><span class="p">(</span><span class="n">brainflow</span><span class="p">)</span>

<span class="n">params</span> <span class="o">&lt;-</span> <span class="n">brainflow_python</span><span class="o">$</span><span class="nf">BrainFlowInputParams </span><span class="p">()</span>
<span class="n">board_shim</span> <span class="o">&lt;-</span> <span class="n">brainflow_python</span><span class="o">$</span><span class="nf">BoardShim </span><span class="p">(</span><span class="n">brainflow_python</span><span class="o">$</span><span class="n">BoardIds</span><span class="o">$</span><span class="n">SYNTHETIC_BOARD</span><span class="o">$</span><span class="n">value</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">prepare_session </span><span class="p">()</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">start_stream </span><span class="p">()</span>
<span class="nf">Sys.sleep </span><span class="p">(</span><span class="n">time</span> <span class="o">=</span> <span class="m">5</span><span class="p">)</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">stop_stream </span><span class="p">()</span>
<span class="n">data</span> <span class="o">&lt;-</span> <span class="n">board_shim</span><span class="o">$</span><span class="nf">get_current_board_data </span><span class="p">(</span><span class="nf">as.integer </span><span class="p">(</span><span class="m">250</span><span class="p">))</span>
<span class="n">board_shim</span><span class="o">$</span><span class="nf">release_session </span><span class="p">()</span>

<span class="c1"># need to convert to numpy array manually</span>
<span class="n">numpy_data</span> <span class="o">&lt;-</span> <span class="n">np</span><span class="o">$</span><span class="nf">array </span><span class="p">(</span><span class="n">data[2</span><span class="p">,</span><span class="n">]</span><span class="p">)</span>
<span class="nf">print </span><span class="p">(</span><span class="n">numpy_data</span><span class="p">)</span>
<span class="n">brainflow_python</span><span class="o">$</span><span class="n">DataFilter</span><span class="o">$</span><span class="nf">perform_wavelet_denoising </span><span class="p">(</span><span class="n">numpy_data</span><span class="p">,</span> <span class="s">&quot;db4&quot;</span><span class="p">,</span> <span class="nf">as.integer </span><span class="p">(</span><span class="m">3</span><span class="p">))</span>
<span class="nf">print </span><span class="p">(</span><span class="n">numpy_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="notebooks">
<h2>Notebooks<a class="headerlink" href="#notebooks" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="notebooks/brainflow_mne.html">BrainFlow to MNE Python Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/denoising.html">Denoising Notebook</a></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="notebooks/brainflow_mne.html" class="btn btn-neutral float-right" title="BrainFlow to MNE Python Notebook" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="DataFormatDesc.html" class="btn btn-neutral float-left" title="Data Format Description" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Andrey Parfenov

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>